"use strict";(self.webpackChunkdevdocs=self.webpackChunkdevdocs||[]).push([[7923],{3905:(e,t,o)=>{o.d(t,{Zo:()=>c,kt:()=>k});var a=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,a,n=function(e,t){if(null==e)return{};var o,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var p=a.createContext({}),s=function(e){var t=a.useContext(p),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},c=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var o=e.components,n=e.mdxType,r=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),h=s(o),k=n,m=h["".concat(p,".").concat(k)]||h[k]||u[k]||r;return o?a.createElement(m,i(i({ref:t},c),{},{components:o})):a.createElement(m,i({ref:t},c))}));function k(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=o.length,i=new Array(r);i[0]=h;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var s=2;s<r;s++)i[s]=o[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,o)}h.displayName="MDXCreateElement"},4158:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var a=o(7462),n=(o(7294),o(3905));const r={},i="Tutorial 10: Create a Webhook",l={unversionedId:"tutorials/create-webhook",id:"tutorials/create-webhook",title:"Tutorial 10: Create a Webhook",description:"Estimated time: 15 min.",source:"@site/docs/tutorials/100_create-webhook.md",sourceDirName:"tutorials",slug:"/tutorials/create-webhook",permalink:"/docs/tutorials/create-webhook",draft:!1,editUrl:"https://github.com/pipeforce/pipeforce.github.io/edit/master/docs/tutorials/100_create-webhook.md",tags:[],version:"current",sidebarPosition:100,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Tutorial 9: Send Teams Message",permalink:"/docs/tutorials/send-teams-message"},next:{title:"Tutorial 11: Create a PDF stamp",permalink:"/docs/tutorials/create-pdf-stamp"}},p={},s=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Webhook - Intro",id:"webhook---intro",level:2},{value:"1 - Create the webhook pipeline",id:"1---create-the-webhook-pipeline",level:2},{value:"2 - Create the webhook",id:"2---create-the-webhook",level:2},{value:"3 - Execute the webhook",id:"3---execute-the-webhook",level:2},{value:"Report an Issue",id:"report-an-issue",level:2}],c={toc:s};function u(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"tutorial-10-create-a-webhook"},"Tutorial 10: Create a Webhook"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Estimated time:")," 15 min."),(0,n.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"PIPEFORCE Enterprise 7.0 or higher."),(0,n.kt)("li",{parentName:"ul"},"You have a valid PIPEFORCE Developer account."),(0,n.kt)("li",{parentName:"ul"},"You have executed tutorial ",(0,n.kt)("a",{parentName:"li",href:"../tutorials/create-app"},"Tutorial: Create a new app"),".")),(0,n.kt)("h2",{id:"webhook---intro"},"Webhook - Intro"),(0,n.kt)("p",null,"Webhooks are a very essential concept for connecting with external systems. A webhook is a URL with a unique token, external systems can call. In PIPEFORCE, if such a webhook URL is called, it is linked to a pipeline internally, which then gets executed."),(0,n.kt)("p",null,"In this tutorial, you will learn how to setup and execute such a webhook."),(0,n.kt)("p",null,"Since a webhook could potentially trigger any kind of logic, double check who can create webhooks, what exactly webhooks are doing, and which external systems can call it!  "),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"You can restrict who can create and manage webhooks by removing the roles CAN","_","PIPE","_","webhook","_","*"," from the developers and groups, who are not allowed to do so. By default any developer can create and manage webhooks.")),(0,n.kt)("h2",{id:"1---create-the-webhook-pipeline"},"1 - Create the webhook pipeline"),(0,n.kt)("p",null,"In this step, we are going to create the pipeline which will be executed whenever the webhook is called externally. To do so, follow these steps:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Login to your portal https://YOUR","_","NAMESPACE.pipeforce.net.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Navigate to LOW CODE \u2192 Workbench.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select the node of the app you created in the previous tutorial.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Click the plus icon at the top of the tree.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("strong",{parentName:"p"},"new property")," view opens:"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"As a property key, use the value ",(0,n.kt)("inlineCode",{parentName:"li"},"global/app/MY_APP/pipeline/mywebhook"),". Replace ",(0,n.kt)("inlineCode",{parentName:"li"},"MY_APP")," with the name of the app you created before, for example ",(0,n.kt)("inlineCode",{parentName:"li"},"myapp24"),". ",(0,n.kt)("strong",{parentName:"li"},"Do use only lower case letters and don\u2019t use special characters or spaces!")),(0,n.kt)("li",{parentName:"ol"},"As mime type, select ",(0,n.kt)("inlineCode",{parentName:"li"},"application/yaml; type=pipeline"),"."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Click SAVE.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"A new pipeline has been created with an hello world example in it.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Replace its content by this pipeline:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  - mail.send:\n      to: "you@domain.tld"\n      subject: "Webhook executed"\n'))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Make sure to replace ",(0,n.kt)("a",{parentName:"p",href:"mailto:you@domain.tld"},"you@domain.tld")," by your email address. Whenever the webhook is executed, an email will be send to this address.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Click SAVE to save the pipeline.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"In order to test it, run the pipeline by clicking the RUN button at the top.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"The pipeline should be successfully executed. After a few seconds, you should receive an email in your inbox with subject ",(0,n.kt)("inlineCode",{parentName:"p"},"Webhook executed"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Now add the command ",(0,n.kt)("inlineCode",{parentName:"p"},"event.listen")," to the pipeline as shown in this listing:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n\n  - event.listen:\n      key: "webhook.tutorial"\n\n  - mail.send:\n      to: "you@domain.tld"\n      subject: "Webhook executed"\n'))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"The command ",(0,n.kt)("inlineCode",{parentName:"p"},"event.listen")," makes sure that this pipeline is executed whenever a webhook has been received with event key ",(0,n.kt)("inlineCode",{parentName:"p"},"webhook.tutorial"),". So, it listens only to this specific webhook."))),(0,n.kt)("admonition",{title:"TIP ",type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"You can define as webhook event key any string you want. As best practise, we suggest you to use always lower case letters and prefix the key with ",(0,n.kt)("inlineCode",{parentName:"p"},"webhook."),". Furthermore, use the period ",(0,n.kt)("inlineCode",{parentName:"p"},".")," as separator, for example ",(0,n.kt)("inlineCode",{parentName:"p"},"webhook.sendmail"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"webhook.order.create"),", and so on.")),(0,n.kt)("h2",{id:"2---create-the-webhook"},"2 - Create the webhook"),(0,n.kt)("p",null,"Now you will link the external caller to your pipeline by creating a webhook configuration. To do so, you have two options:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Using the command ",(0,n.kt)("a",{parentName:"li",href:"/docs/api/commands#webhookput-v1"},(0,n.kt)("inlineCode",{parentName:"a"},"webhook.put"))," "),(0,n.kt)("li",{parentName:"ol"},"Using the Portal")),(0,n.kt)("p",null,"In this tutorial we will use the latter one: Creating a webhook configuration using the Web Portal."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Login to your PIPEFORCE portal."),(0,n.kt)("li",{parentName:"ol"},"Navigate to ",(0,n.kt)("strong",{parentName:"li"},"LOW CODE \u2192 Webhooks"),"."),(0,n.kt)("li",{parentName:"ol"},"Click ",(0,n.kt)("strong",{parentName:"li"},"ADD WEBHOOK"),". A dialog should open, similar to this:\n",(0,n.kt)("img",{src:o(7774).Z,width:"852",height:"782"})),(0,n.kt)("li",{parentName:"ol"},"Use these values to create a webhook configuration and click ",(0,n.kt)("strong",{parentName:"li"},"ADD")," afterwards:",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"EventKey: ",(0,n.kt)("inlineCode",{parentName:"li"},"webhook.tutorial")),(0,n.kt)("li",{parentName:"ol"},"Payload type: ",(0,n.kt)("inlineCode",{parentName:"li"},"ignore")," "),(0,n.kt)("li",{parentName:"ol"},"Max. payload length: ",(0,n.kt)("inlineCode",{parentName:"li"},"0")))),(0,n.kt)("li",{parentName:"ol"},"A new entry was created in the list of webhooks. Click on it and copy the URL for the next step.")),(0,n.kt)("h2",{id:"3---execute-the-webhook"},"3 - Execute the webhook"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Copy the webhook url with the token parameter from the result of the previous step."),(0,n.kt)("li",{parentName:"ol"},"Open your browser or Postman, paste this url and execute it."),(0,n.kt)("li",{parentName:"ol"},"After a few seconds, you should receive an email to your inbox.")),(0,n.kt)("p",null,"The webhook url is the url you can register in external systems to call your pipeline externally. Since this url calls your system, make sure that only you and the external system knows it."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Congrats, you have created your first webhook with PIPEFORCE!")),(0,n.kt)("h2",{id:"report-an-issue"},"Report an Issue"),(0,n.kt)("admonition",{title:"Your help is needed!",type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"In case you're missing something on this page, you found an error or you have an idea for improvement, please ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/pipeforce/pipeforce.github.io/issues/new"},"click here to create a new issue"),". Another way to contribute is, to click ",(0,n.kt)("strong",{parentName:"p"},"Edit this page")," below and directly add your changes in GitHub. Many thanks for your contribution in order to improve PIPEFORCE!")))}u.isMDXComponent=!0},7774:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/webhook-add-dialog-3beab5aff7f23ddf42bcb8c944a0bd4c.png"}}]);