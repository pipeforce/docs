"use strict";(self.webpackChunkdevdocs=self.webpackChunkdevdocs||[]).push([[9285],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>c});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},p=Object.keys(e);for(a=0;a<p.length;a++)n=p[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)n=p[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var o=a.createContext({}),d=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},s=function(e){var t=d(e.components);return a.createElement(o.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,p=e.originalType,o=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),u=d(n),c=l,h=u["".concat(o,".").concat(c)]||u[c]||m[c]||p;return n?a.createElement(h,r(r({ref:t},s),{},{components:n})):a.createElement(h,r({ref:t},s))}));function c(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var p=n.length,r=new Array(p);r[0]=u;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i.mdxType="string"==typeof e?e:l,r[1]=i;for(var d=2;d<p;d++)r[d]=n[d];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(7294),l=n(6010);const p="tabItem_Ymn6";function r(e){let{children:t,hidden:n,className:r}=e;return a.createElement("div",{role:"tabpanel",className:(0,l.Z)(p,r),hidden:n},t)}},5488:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7462),l=n(7294),p=n(6010),r=n(2389),i=n(7392),o=n(7094),d=n(2466);const s="tabList__CuJ",m="tabItem_LNqP";function u(e){var t;const{lazy:n,block:r,defaultValue:u,values:c,groupId:h,className:y}=e,k=l.Children.map(e.children,(e=>{if((0,l.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),b=c??k.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),N=(0,i.l)(b,((e,t)=>e.value===t.value));if(N.length>0)throw new Error(`Docusaurus error: Duplicate values "${N.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const g=null===u?u:u??(null==(t=k.find((e=>e.props.default)))?void 0:t.props.value)??k[0].props.value;if(null!==g&&!b.some((e=>e.value===g)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${g}" but none of its children has the corresponding value. Available values are: ${b.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:f,setTabGroupChoices:T}=(0,o.U)(),[v,x]=(0,l.useState)(g),C=[],{blockElementScrollPositionUntilNextRender:w}=(0,d.o5)();if(null!=h){const e=f[h];null!=e&&e!==v&&b.some((t=>t.value===e))&&x(e)}const P=e=>{const t=e.currentTarget,n=C.indexOf(t),a=b[n].value;a!==v&&(w(t),x(a),null!=h&&T(h,String(a)))},O=e=>{var t;let n=null;switch(e.key){case"Enter":P(e);break;case"ArrowRight":{const t=C.indexOf(e.currentTarget)+1;n=C[t]??C[0];break}case"ArrowLeft":{const t=C.indexOf(e.currentTarget)-1;n=C[t]??C[C.length-1];break}}null==(t=n)||t.focus()};return l.createElement("div",{className:(0,p.Z)("tabs-container",s)},l.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,p.Z)("tabs",{"tabs--block":r},y)},b.map((e=>{let{value:t,label:n,attributes:r}=e;return l.createElement("li",(0,a.Z)({role:"tab",tabIndex:v===t?0:-1,"aria-selected":v===t,key:t,ref:e=>C.push(e),onKeyDown:O,onClick:P},r,{className:(0,p.Z)("tabs__item",m,null==r?void 0:r.className,{"tabs__item--active":v===t})}),n??t)}))),n?(0,l.cloneElement)(k.filter((e=>e.props.value===v))[0],{className:"margin-top--md"}):l.createElement("div",{className:"margin-top--md"},k.map(((e,t)=>(0,l.cloneElement)(e,{key:t,hidden:e.props.value!==v})))))}function c(e){const t=(0,r.Z)();return l.createElement(u,(0,a.Z)({key:String(t)},e))}},2631:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>d,toc:()=>m});var a=n(7462),l=(n(7294),n(3905)),p=n(5488),r=n(5162);const i={title:"HTTP API - Commands & Pipeline",sidebar_label:"HTTP API"},o=void 0,d={unversionedId:"guides/commands_pipelines/http_api",id:"guides/commands_pipelines/http_api",title:"HTTP API - Commands & Pipeline",description:"Since Version: 1.0",source:"@site/docs/guides/commands_pipelines/15_http_api.md",sourceDirName:"guides/commands_pipelines",slug:"/guides/commands_pipelines/http_api",permalink:"/docs/guides/commands_pipelines/http_api",draft:!1,editUrl:"https://github.com/pipeforce/pipeforce.github.io/edit/master/docs/guides/commands_pipelines/15_http_api.md",tags:[],version:"current",sidebarPosition:15,frontMatter:{title:"HTTP API - Commands & Pipeline",sidebar_label:"HTTP API"},sidebar:"tutorialSidebar",previous:{title:"Basics",permalink:"/docs/commands_pipelines"},next:{title:"Pipeline Expression Language",permalink:"/docs/guides/commands_pipelines/pel"}},s={},m=[{value:"HTTP API for single commands calls",id:"http-api-for-single-commands-calls",level:2},{value:"HTTP Methods",id:"http-methods",level:3},{value:"Example 1: No body",id:"example-1-no-body",level:3},{value:"Example 2: With JSON in body",id:"example-2-with-json-in-body",level:3},{value:"Example 3: With binary data in body",id:"example-3-with-binary-data-in-body",level:3},{value:"Example 4: With multipart body",id:"example-4-with-multipart-body",level:3},{value:"HTTP API for adhoc pipeline calls",id:"http-api-for-adhoc-pipeline-calls",level:2},{value:"HTTP Methods",id:"http-methods-1",level:3},{value:"Example 5: No body",id:"example-5-no-body",level:3},{value:"Example 6: With body embedded",id:"example-6-with-body-embedded",level:3},{value:"Example 7: With url encoded pipeline",id:"example-7-with-url-encoded-pipeline",level:3},{value:"Example 8: With multipart body",id:"example-8-with-multipart-body",level:3},{value:"HTTP API for persisted pipeline calls",id:"http-api-for-persisted-pipeline-calls",level:2},{value:"HTTP Methods",id:"http-methods-2",level:3},{value:"Example 9: Execute persisted pipeline",id:"example-9-execute-persisted-pipeline",level:3},{value:"Example 10: Store a pipeline",id:"example-10-store-a-pipeline",level:3},{value:"Report an Issue",id:"report-an-issue",level:2}],u={toc:m};function c(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",{class:"theme-doc-version-badge badge badge--secondary"},"Since Version: 1.0"),(0,l.kt)("admonition",{title:"Also see ",type:"tip"},(0,l.kt)("ul",{parentName:"admonition"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"/docs/commands_pipelines"},"Introduction to Commands & Pipelines")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"http://docs.pipeforce.io/api.html"},"PIPEFORCE HTTP API Reference")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"/docs/api/commands"},"Commands Reference")))),(0,l.kt)("p",null," Commands and pipelines can be executed using a HTTP API which is similar to RESTful endpoints. The HTTP request methods ",(0,l.kt)("inlineCode",{parentName:"p"},"POST")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"GET"),", the HTTP header ",(0,l.kt)("inlineCode",{parentName:"p"},"Content-Type")," and the request body define, how commands and pipelines are executed and which parameters and message body values are set."),(0,l.kt)("p",null," The return value depends on the command or the pipeline and is mostly a JSON document.  "),(0,l.kt)("p",null," It's important to understand, that you have two options to call the backend using the HTTP API:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"A single Command"),(0,l.kt)("li",{parentName:"ul"},"A chain of Commands using a Pipeline script")),(0,l.kt)("p",null,"Below, these two options will be explained in more detail."),(0,l.kt)("h2",{id:"http-api-for-single-commands-calls"},"HTTP API for single commands calls"),(0,l.kt)("p",null," You can call a single command using a HTTP request with the endpoint "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"/api/v3/command/<name>\n")),(0,l.kt)("p",null," Whereas ",(0,l.kt)("inlineCode",{parentName:"p"},"<name>")," needs to be replaced by the name of the command. The optional request parameters will become the command parameters. See ",(0,l.kt)("a",{parentName:"p",href:"/docs/api/commands"},"here")," for a reference of all built-in commands and their parameters. Using the request header ",(0,l.kt)("inlineCode",{parentName:"p"},"Content-Type")," and the request body, you can optionally set the message body for the command."),(0,l.kt)("h3",{id:"http-methods"},"HTTP Methods"),(0,l.kt)("p",null,"In order to execute a command on the backend, you need to send a HTTP request to the endpoint ",(0,l.kt)("inlineCode",{parentName:"p"},"/api/v3/command/<name>")," by using one of these HTTP options:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"HTTP Method"),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"Content-Type")),(0,l.kt)("th",{parentName:"tr",align:null},"Request Body"),(0,l.kt)("th",{parentName:"tr",align:null},"Message Body"),(0,l.kt)("th",{parentName:"tr",align:null},"Execution"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"is set to")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"is set to")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"is set to")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"will become")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"is"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"GET")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"None")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"None")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"None")),(0,l.kt)("td",{parentName:"tr",align:null},"A single command given by ",(0,l.kt)("inlineCode",{parentName:"td"},"<name>")," with parameters set from request parameters and a ",(0,l.kt)("inlineCode",{parentName:"td"},"null")," body. See ",(0,l.kt)("a",{parentName:"td",href:"#example-1-no-body"},"Example"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"POST")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"application/json")),(0,l.kt)("td",{parentName:"tr",align:null},"A JSON data document"),(0,l.kt)("td",{parentName:"tr",align:null},"A parsed JSON data object"),(0,l.kt)("td",{parentName:"tr",align:null},"A single command given by ",(0,l.kt)("inlineCode",{parentName:"td"},"<name>")," with parameters set from request parameters and the JSON object in the body. See ",(0,l.kt)("a",{parentName:"td",href:"#example-2-with-json-in-body"},"Example"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"POST")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"Any")),(0,l.kt)("td",{parentName:"tr",align:null},"Any (binary) data format as specified by the ",(0,l.kt)("inlineCode",{parentName:"td"},"Content-Type")," Note: Additionally the header ",(0,l.kt)("inlineCode",{parentName:"td"},"Content-Length")," is mandatory in this case."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"/docs/guides/contentobject"},"Content Object")," referencing the data in the request body as a stream."),(0,l.kt)("td",{parentName:"tr",align:null},"A single command given by ",(0,l.kt)("inlineCode",{parentName:"td"},"<name>")," with parameters set from request parameters and a content object in the body. This is the most effective way of uploading large data to a command. See ",(0,l.kt)("a",{parentName:"td",href:"#example-3-with-binary-data-in-body"},"Example"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"POST")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"multipart/form-data")),(0,l.kt)("td",{parentName:"tr",align:null},"One or more parts with ",(0,l.kt)("inlineCode",{parentName:"td"},'name="file"')," in the content disposition header. See ",(0,l.kt)("a",{parentName:"td",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST"},"how HTTP multipart works"),"."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"/docs/guides/contentobject"},"Content Collection")," with each entry referencing a part data."),(0,l.kt)("td",{parentName:"tr",align:null},"A single command given by ",(0,l.kt)("inlineCode",{parentName:"td"},"<name>")," with parameters set from request parameters and a content collection in the body. See ",(0,l.kt)("a",{parentName:"td",href:"#example-4-with-multipart-body"},"Example"))))),(0,l.kt)("h3",{id:"example-1-no-body"},"Example 1: No body"),(0,l.kt)("p",null,"In case you would like to execute a single command without a body, you could run it like this:"),(0,l.kt)(p.Z,{mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -u 'username:password' \\\n  'https://hub-try.pipeforce.org/api/v3/command/message.send?key=slack&payload=HELLO'\n"))),(0,l.kt)(r.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"GET /api/v3/command/message.send?key=slack&payload=HELLO HTTP/1.1\nHost: hub-try.pipeforce.org\nAuthorization: Basic cGFzc3dvcmQ6dXNlcm5hbWU=\n"))),(0,l.kt)(r.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\n\nvar config = {\n  method: 'get',\n  url: 'https://hub-try.pipeforce.org/api/v3/command/message.send?key=slack&payload=HELLO',\n  headers: { \n    'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU='\n  }\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n"))),(0,l.kt)(r.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"import requests\n\nurl = \"https://hub-try.pipeforce.org/api/v3/command/message.send?key=slack&payload=HELLO\"\n\npayload = {}\nheaders = {\n  'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU='\n}\n\nresponse = requests.request(\"GET\", url, headers=headers, data=payload)\n\n"))),(0,l.kt)(r.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<String> response = Unirest.get("https://hub-try.pipeforce.org/api/v3/command/message.send?key=slack&payload=HELLO")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .asString();\n')))),(0,l.kt)("p",null,"This example simply sends a new message to the message broker with key ",(0,l.kt)("inlineCode",{parentName:"p"},"slack")," and with message payload ",(0,l.kt)("inlineCode",{parentName:"p"},"HELLO"),". "),(0,l.kt)("h3",{id:"example-2-with-json-in-body"},"Example 2: With JSON in body"),(0,l.kt)("p",null,"In case you would like to execute a single command with a JSON document as body data, you could execute this curl:"),(0,l.kt)(p.Z,{mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -u 'username:password' \\\n  -H 'Content-Type: application/json' \\\n  -X POST 'https://hub-try.pipeforce.org/api/v3/command/property.put?key=some/key' \\\n  -d '{\"name\": \"someValue\"}'\n"))),(0,l.kt)(r.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'POST /api/v3/command/property.put?key=some/key HTTP/1.1\nHost: hub-try.pipeforce.org\nAuthorization: Basic cGFzc3dvcmQ6dXNlcm5hbWU=\nContent-Type: application/json\nContent-Length: 21\n\n{"name": "someValue"}\n'))),(0,l.kt)(r.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar data = JSON.stringify({\n  \"name\": \"someValue\"\n});\n\nvar config = {\n  method: 'post',\n  url: 'https://hub-try.pipeforce.org/api/v3/command/property.put?key=some/key',\n  headers: { \n    'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=', \n    'Content-Type': 'application/json'\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n\n"))),(0,l.kt)(r.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"import requests\nimport json\n\nurl = \"https://hub-try.pipeforce.org/api/v3/command/property.put?key=some/key\"\n\npayload = json.dumps({\n  \"name\": \"someValue\"\n})\nheaders = {\n  'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=',\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n"))),(0,l.kt)(r.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<String> response = Unirest.post("https://hub-try.pipeforce.org/api/v3/command/property.put?key=some/key")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .header("Content-Type", "application/json")\n  .body("{\\"name\\": \\"someValue\\"}")\n  .asString();\n')))),(0,l.kt)("h3",{id:"example-3-with-binary-data-in-body"},"Example 3: With binary data in body"),(0,l.kt)("p",null,"In case you would like to execute a single command with a binary data in the body, you could execute this curl, which uploads the content of a local PDF file to a command:"),(0,l.kt)(p.Z,{mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -u 'username:password' \\\n  -H 'Content-Type: application/pdf' \\\n  -X POST 'https://hub-try.pipeforce.org/api/v3/command/property.attachment.put?key=some/key&name=my.pdf' \\\n  --data-binary \"@my.pdf\"\n"))),(0,l.kt)(r.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"POST /api/v3/command/property.attachment.put?key=some/key&name=my.pdf HTTP/1.1\nHost: hub-try.pipeforce.org\nAuthorization: Basic cGFzc3dvcmQ6dXNlcm5hbWU=\nContent-Type: application/pdf\nContent-Length: 22\n\n<raw data of my.pdf here>\n"))),(0,l.kt)(r.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar data = '<raw data of my.pdf here>';\n\nvar config = {\n  method: 'post',\n  url: 'https://hub-try.pipeforce.org/api/v3/command/property.attachment.put?key=some/key&name=my.pdf',\n  headers: { \n    'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=', \n    'Content-Type': 'application/pdf'\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n"))),(0,l.kt)(r.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"import requests\n\nurl = \"https://hub-try.pipeforce.org/api/v3/command/property.attachment.put?key=some/key&name=my.pdf\"\n\npayload = \"<raw data of my.pdf here>\"\nheaders = {\n  'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=',\n  'Content-Type': 'application/pdf'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n"))),(0,l.kt)(r.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<String> response = Unirest.post("https://hub-try.pipeforce.org/api/v3/command/property.attachment.put?key=some/key&name=my.pdf")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .header("Content-Type", "application/pdf")\n  .body("<raw data of my.pdf here>")\n  .asString();\n')))),(0,l.kt)("h3",{id:"example-4-with-multipart-body"},"Example 4: With multipart body"),(0,l.kt)("p",null,"In case you would like to execute a single command with multiple parts (files) uploaded and provided in the body, you can run this:"),(0,l.kt)(p.Z,{mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -u 'username:password' \\\n  -X POST 'https://hub-try.pipeforce.org/api/v3/command/property.attachment.put?key=some/key'  \\\n  -F file=@my1.pdf \\\n  -F file=@my2.pdf\n"))),(0,l.kt)(r.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},'POST /api/v3/command/property.attachment.put?key=some/key HTTP/1.1\nHost: hub-try.pipeforce.org\nAuthorization: Basic cGFzc3dvcmQ6dXNlcm5hbWU=\nContent-Length: 318\nContent-Type: multipart/form-data; boundary=----Boundary7MA4YWxkTrZu0gW\n\n----Boundary7MA4YWxkTrZu0gW\nContent-Disposition: form-data; name="file"; filename="my1.pdf"\nContent-Type: application/pdf\n\n<raw data of my1.pdf here>\n----Boundary7MA4YWxkTrZu0gW\nContent-Disposition: form-data; name="file"; filename="my2.pdf"\nContent-Type: application/pdf\n\n<raw data of my2.pdf here>\n----Boundary7MA4YWxkTrZu0gW--\n\n'))),(0,l.kt)(r.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar FormData = require('form-data');\nvar fs = require('fs');\nvar data = new FormData();\ndata.append('file', fs.createReadStream('/my1.pdf'));\ndata.append('file', fs.createReadStream('/my2.pdf'));\n\nvar config = {\n  method: 'post',\n  url: 'https://hub-try.pipeforce.org/api/v3/command/property.attachment.put?key=some/key',\n  headers: { \n    'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=', \n    ...data.getHeaders()\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n"))),(0,l.kt)(r.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"import requests\n\nurl = \"https://hub-try.pipeforce.org/api/v3/command/property.attachment.put?key=some/key\"\n\npayload={}\nfiles=[\n  ('file',('my1.pdf',open('/my1.pdf','rb'),'application/pdf')),\n  ('file',('my2.pdf',open('/my2.pdf','rb'),'application/pdf'))\n]\nheaders = {\n  'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU='\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload, files=files)\n"))),(0,l.kt)(r.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<String> response = Unirest.post("https://hub-try.pipeforce.org/api/v3/command/property.attachment.put?key=some/key")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .field("file", new File("/my1.pdf"))\n  .field("file", new File("/my2.pdf"))\n  .asString();\n')))),(0,l.kt)("p",null,"This example will upload two files ",(0,l.kt)("inlineCode",{parentName:"p"},"my1.pdf")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"my2.pdf")," and add them as attachments to the property with key ",(0,l.kt)("inlineCode",{parentName:"p"},"some/key"),". For more details, how multipart HTTP POST requests work, see the ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST"},"Mozilla Docs"),"."),(0,l.kt)("h2",{id:"http-api-for-adhoc-pipeline-calls"},"HTTP API for adhoc pipeline calls"),(0,l.kt)("p",null,"  Another option to call the backend is to define a chain of commands to be executed in an adhoc pipeline and run this by sending it via HTTP ",(0,l.kt)("inlineCode",{parentName:"p"},"POST")," request to "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"/api/v3/pipeline\n")),(0,l.kt)("p",null,"  Again by using the request header ",(0,l.kt)("inlineCode",{parentName:"p"},"Content-Type")," and the request body, you can optionally set the body data for the pipeline."),(0,l.kt)("h3",{id:"http-methods-1"},"HTTP Methods"),(0,l.kt)("p",null,"In order to execute a pipeline script on the backend, you need to send via HTTP POST request to the endpoint ",(0,l.kt)("inlineCode",{parentName:"p"},"/api/v3/pipeline")," by using one of these HTTP options:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"HTTP Method"),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"Content-Type")),(0,l.kt)("th",{parentName:"tr",align:null},"Request Body"),(0,l.kt)("th",{parentName:"tr",align:null},"Message Body"),(0,l.kt)("th",{parentName:"tr",align:null},"Execution"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"is set to")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"is set to")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"is set to")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"will become")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"is"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"POST")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"application/json")),(0,l.kt)("td",{parentName:"tr",align:null},"A JSON pipeline document."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"null")," or the value set by the ",(0,l.kt)("inlineCode",{parentName:"td"},"body")," section of the pipeline."),(0,l.kt)("td",{parentName:"tr",align:null},"A pipeline set as JSON from the request body.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"POST")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"application/yaml")),(0,l.kt)("td",{parentName:"tr",align:null},"A YAML pipeline document."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"null")," or the value set by the ",(0,l.kt)("inlineCode",{parentName:"td"},"body")," section of the pipeline."),(0,l.kt)("td",{parentName:"tr",align:null},"A pipeline set as YAML from the request body. See examples with ",(0,l.kt)("a",{parentName:"td",href:"#example-5-no-body"},"no body")," and ",(0,l.kt)("a",{parentName:"td",href:"#example-6-with-body-embedded"},"embedded body"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"POST")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"application/x-www-form-urlencoded")),(0,l.kt)("td",{parentName:"tr",align:null},"The pipeline as URL encoded request query string whereas the key of each parameter is the command name and the value defines the parameters to the command. Key and value must be separated by a colon ",(0,l.kt)("inlineCode",{parentName:"td"},":"),". Multiple command parameters are separated by semicolon ",(0,l.kt)("inlineCode",{parentName:"td"},";"),". Example (before url encoding): ",(0,l.kt)("inlineCode",{parentName:"td"},"log=message:'Hello World!';level:INFO")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"null")),(0,l.kt)("td",{parentName:"tr",align:null},"A pipeline set as URL encoded query string from the request body. See example with ",(0,l.kt)("a",{parentName:"td",href:"#example-7-with-url-encoded-pipeline"},"url encoded query"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"POST")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"None")),(0,l.kt)("td",{parentName:"tr",align:null},"A YAML pipeline document (same as with ",(0,l.kt)("inlineCode",{parentName:"td"},"application/yaml"),")."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"null")," or the value set by the ",(0,l.kt)("inlineCode",{parentName:"td"},"body")," section of the pipeline."),(0,l.kt)("td",{parentName:"tr",align:null},"A pipeline set as YAML from the request body. Any other format in the body will throw an ",(0,l.kt)("inlineCode",{parentName:"td"},"400")," bad request error.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"POST")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"multipart/form-data")),(0,l.kt)("td",{parentName:"tr",align:null},"One part with ",(0,l.kt)("inlineCode",{parentName:"td"},'name="pipeline"')," with a YAML pipeline and one or more parts with ",(0,l.kt)("inlineCode",{parentName:"td"},'name="file"')," in the content disposition header. See ",(0,l.kt)("a",{parentName:"td",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST"},"how HTTP multipart works"),"."),(0,l.kt)("td",{parentName:"tr",align:null},"Content Collection referencing all ",(0,l.kt)("inlineCode",{parentName:"td"},"file"),"parts."),(0,l.kt)("td",{parentName:"tr",align:null},"A pipeline set as YAML from the ",(0,l.kt)("inlineCode",{parentName:"td"},"pipeline")," part and with a content collection in the body created from all ",(0,l.kt)("inlineCode",{parentName:"td"},"file")," parts of the request body. See ",(0,l.kt)("a",{parentName:"td",href:"#example-8-with-multipart-body"},"Example"),".")))),(0,l.kt)("admonition",{title:"Note",type:"warning"},(0,l.kt)("p",{parentName:"admonition"},"Using the HTTP methd ",(0,l.kt)("inlineCode",{parentName:"p"},"GET")," with the ",(0,l.kt)("inlineCode",{parentName:"p"},"/pipeline")," endpoint is not possible and will cause an error.")),(0,l.kt)("h3",{id:"example-5-no-body"},"Example 5: No body"),(0,l.kt)("p",null,"In case you would like to execute a pipeline YAML script without a message body, you can run this:"),(0,l.kt)(p.Z,{mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'curl -u \'username:password\' \\\n  -X POST "https://hub-try.pipeforce.org/api/v3/pipeline" \\\n  -H "Content-Type: application/yaml" \\\n  --data-binary @- << EOF\npipeline:\n - drive.read:\n     path: /my.pdf\n - pdf.stamp:\n     text: "Hello World!"\n - drive.save:\n     path: /my-stamped.pdf\nEOF\n'))),(0,l.kt)(r.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'POST /api/v3/pipeline HTTP/1.1\nHost: hub-try.pipeforce.org\nContent-Type: application/yaml\nAuthorization: Basic cGFzc3dvcmQ6dXNlcm5hbWU=\nContent-Length: 143\n\npipeline:\n    - drive.read:\n        path: /my.pdf\n    - pdf.stamp:\n        text: "Hello World!"\n    - drive.save:\n        path: /my-stamped.pdf\n'))),(0,l.kt)(r.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'var axios = require(\'axios\');\nvar data = "pipeline:\\n" +\n            "    - drive.read:\\n" +\n            "        path: /my.pdf\\n" +\n            "    - pdf.stamp:\\n" +\n            "        text: \\"Hello World!\\"\\n" +\n            "    - drive.save:\\n" +\n            "        path: /my-stamped.pdf";\n\nvar config = {\n  method: \'post\',\n  url: \'https://hub-try.pipeforce.org/api/v3/pipeline\',\n  headers: { \n    \'Content-Type\': \'application/yaml\', \n    \'Authorization\': \'Basic cGFzc3dvcmQ6dXNlcm5hbWU=\'\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n\n'))),(0,l.kt)(r.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'import requests\n\nurl = "https://hub-try.pipeforce.org/api/v3/pipeline"\n\npayload = """pipeline:\n  - drive.read:       \n      path: /my.pdf    \n  - pdf.stamp:        \n      text: "Hello World!"    \n  - drive.save:        \n      path: "/my-stamped.pdf" """\n\nheaders = {\n  \'Content-Type\': \'application/yaml\',\n  \'Authorization\': \'Basic cGFzc3dvcmQ6dXNlcm5hbWU=\'\n}\n\nresponse = requests.request("POST", url, headers=headers, data=payload)\n\n'))),(0,l.kt)(r.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<String> response = Unirest.post("https://hub-try.pipeforce.org/api/v3/pipeline")\n  .header("Content-Type", "application/yaml")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .body("pipeline:\\n" +\n            "    - drive.read:\\n" +\n            "        path: /my.pdf\\n" +\n            "    - pdf.stamp:\\n" +\n            "        text: \\"Hello World!\\"\\n" +\n            "    - drive.save:\\n" +\n            "        path: /my-stamped.pdf")\n  .asString();\n')))),(0,l.kt)("h3",{id:"example-6-with-body-embedded"},"Example 6: With body embedded"),(0,l.kt)("p",null,"In case you would like to execute a pipeline YAML script with message body, which is embedded inside the YAML, you can run this:"),(0,l.kt)(p.Z,{mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'curl -u \'username:password\' \\\n  -X POST "https://hub-try.pipeforce.org/api/v3/pipeline" \\\n  -H "Content-Type: application/yaml" \\\n  --data-binary @- << EOF\npipeline:\n  - log:\n      message: "BODY: #{body.text}"\n\nbody: {"text": "Hello World!"}\nEOF\n'))),(0,l.kt)(r.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'POST /api/v3/pipeline HTTP/1.1\nHost: hub-try.pipeforce.org\nContent-Type: application/yaml\nAuthorization: Basic cGFzc3dvcmQ6dXNlcm5hbWU=\nContent-Length: 86\n\npipeline:\n  - log:\n      message: "BODY: #{body.text}"\n\nbody: {"text": "Hello World!"}\n'))),(0,l.kt)(r.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar data = 'pipeline:\\n  - log:\\n      message: \"BODY: #{body.text}\"\\n\\nbody: {\"text\": \"Hello World!\"}';\n\nvar config = {\n  method: 'post',\n  url: 'https://hub-try.pipeforce.org/api/v3/pipeline',\n  headers: { \n    'Content-Type': 'application/yaml', \n    'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU='\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n"))),(0,l.kt)(r.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'import requests\n\nurl = "https://hub-try.pipeforce.org/api/v3/pipeline"\n\npayload = """pipeline:  \n  - log:      \n      message: "BODY: #{body.text}"\n  body: {"text": "Hello World!"}"""\nheaders = {\n  \'Content-Type\': \'application/yaml\',\n  \'Authorization\': \'Basic cGFzc3dvcmQ6dXNlcm5hbWU=\'\n}\n\nresponse = requests.request("POST", url, headers=headers, data=payload)\n'))),(0,l.kt)(r.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<String> response = Unirest.post("https://hub-try.pipeforce.org/api/v3/pipeline")\n  .header("Content-Type", "application/yaml")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .body("pipeline:\\n  " + \n          "- log:\\n" +\n          "      message: \\"BODY: #{body.text}\\"\\n\\n" + \n          "body: {\\"text\\": \\"Hello World!\\"}")\n  .asString();\n')))),(0,l.kt)("h3",{id:"example-7-with-url-encoded-pipeline"},"Example 7: With url encoded pipeline"),(0,l.kt)("p",null,"In this example, a simple adhoc pipeline is called using an ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST"},"url encoded query string"),". "),(0,l.kt)("p",null,"Suppose you have a pipeline that looks like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  - datetime:\n      format: dd.MM.YY\n  - set.body:\n      value: "Today is: #{body}"\n')),(0,l.kt)("p",null,"You can rewrite it to a query string like this (not url encoded):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'datetime=format:dd.MM.YY&set.body=value:"Today is: #{body}"\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"The query parameter key becomes the command name (for example ",(0,l.kt)("inlineCode",{parentName:"li"},"datetime"),")."),(0,l.kt)("li",{parentName:"ul"},"The query parameter value specifies the parameters to the command in the format of ",(0,l.kt)("inlineCode",{parentName:"li"},"<key>:<value>")," pairs. The value part of such a parameter can optionally be put into 'single' or \"double\" quotes. Examples:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"log=message:HELLO WORLD")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"log='HELLO WORLD'")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},'log="HELLO WORLD"')))),(0,l.kt)("li",{parentName:"ul"},"Multiple ",(0,l.kt)("inlineCode",{parentName:"li"},"<key>:<value>")," pairs must be separated by ",(0,l.kt)("inlineCode",{parentName:"li"},";"),". Example:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"log='HELLO WORLD';level=INFO")))),(0,l.kt)("li",{parentName:"ul"},"Multiple commands must be separated by ",(0,l.kt)("inlineCode",{parentName:"li"},"&"),". Examples:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"log='HELLO WORLD';level=INFO&datetime")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"log='HELLO WORLD';level=INFO&datetime=format:dd.MM.YY")))),(0,l.kt)("li",{parentName:"ul"},"Finally, values need to be URL encoded. Example:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"datetime=format:dd.MM.YY")," encodes to ",(0,l.kt)("inlineCode",{parentName:"li"},"datetime=format%3Add.MM.YY"))))),(0,l.kt)("p",null,"For more details about the ",(0,l.kt)("inlineCode",{parentName:"p"},"application/x-www-url-encoded")," content type in the HTTP standard see for example: ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST"},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST")),(0,l.kt)("p",null,"After the values have been url encoded, the query string looks like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"datetime=format%3Add.MM.YY&set.body=value%3A%20%22Today%20is%3A%20%23%7Bbody%7D%2\n")),(0,l.kt)("p",null,"Below you can find the execution examples using this url encoded query string:"),(0,l.kt)(p.Z,{mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -u 'username:password' \\\n  -H 'Content-Type: application/x-www-form-urlencoded' \\\n  -X POST 'https://hub-<your-domain>/api/v3/pipeline' \\\n  -d 'datetime=format%3Add.MM.YY&set.body=value%3A%20%22Today%20is%3A%20%23%7Bbody%7D%22'\n"))),(0,l.kt)(r.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"POST /api/v3/pipeline HTTP/1.1\nHost: hub-<your-domain>\nAuthorization: Basic cGFzc3dvcmQ6dXNlcm5hbWU=\nContent-Type: application/x-www-form-urlencoded\nContent-Length: 82\n\ndatetime=format%3Add.MM.YY&set.body=value%3A%20%22Today%20is%3A%20%23%7Bbody%7D%22\n"))),(0,l.kt)(r.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar data = 'datetime=format%3Add.MM.YY&set.body=value%3A%20%22Today%20is%3A%20%23%7Bbody%7D%22';\n\nvar config = {\n  method: 'post',\n  url: 'https://hub-<your-domain>/api/v3/pipeline',\n  headers: { \n    'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=', \n    'Content-Type': 'application/x-www-form-urlencoded'\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n\n"))),(0,l.kt)(r.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"import requests\nimport json\n\nurl = \"https://hub-<your-domain>/api/v3/pipeline\"\n\npayload = \"datetime=format%3Add.MM.YY&set.body=value%3A%20%22Today%20is%3A%20%23%7Bbody%7D%22\"\nheaders = {\n  'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=',\n  'Content-Type': 'application/x-www-form-urlencoded'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n"))),(0,l.kt)(r.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<String> response = Unirest.post("https://hub-<your-domain>/api/v3/pipeline")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .header("Content-Type", "application/x-www-form-urlencoded")\n  .body("datetime=format%3Add.MM.YY&set.body=value%3A%20%22Today%20is%3A%20%23%7Bbody%7D%22")\n  .asString();\n')))),(0,l.kt)("h3",{id:"example-8-with-multipart-body"},"Example 8: With multipart body"),(0,l.kt)("p",null,"Let's assume you would like to execute a pipeline script and additionally processing one or more files in this same pipeline which must be placed in the body."),(0,l.kt)("p",null,"Here\u2019s an example of an HTTP multipart request as defined by the HTTP specification. This example does multiple steps in one request: It uploads a PDF, puts a new text on this PDF and finally stores it at server side:"),(0,l.kt)(p.Z,{mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -u 'username:password' \\\n  -X POST 'https://hub-try.pipeforce.org/api/v3/pipeline' \\\n  -F 'pipeline=\"pipeline:\n        - pdf.stamp:\n            text: \\\"Hello World!\\\"\n        - drive.save:\n            path: /my-stamped.pdf \"' \\\n  -F 'file=@/my1.pdf' \\\n"))),(0,l.kt)(r.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'POST /api/v3/pipeline HTTP/1.1 \nHost: hub-acme.pipefore.net\nContent-Type: multipart/form-data;boundary="boundary" \n\n--boundary \nContent-Disposition: form-data; name="pipeline" \n\npipeline:\n - pdf.stamp:\n     text: "Hello World!"\n - drive.save:\n     path: /my-stamped.pdf \n--boundary \nContent-Disposition: form-data; name="file"; filename="my1.pdf" \n\n<raw data of my1.pdf here>\n--boundary--\n'))),(0,l.kt)(r.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar FormData = require('form-data');\nvar fs = require('fs');\nvar data = new FormData();\ndata.append('pipeline', \"pipeline:\\n\" +\n            \" - pdf.stamp:\\n\" +\n            \"     text: \\\"Hello World!\\\"\\n\" +\n            \" - drive.save:\\n\" +\n            \"     path: /my-stamped.pdf\");\ndata.append('file', fs.createReadStream('/my1.pdf'));\n\nvar config = {\n  method: 'post',\n  url: 'https://hub-try.pipeforce.org/api/v3/pipeline',\n  headers: { \n    'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=', \n    ...data.getHeaders()\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n\n"))),(0,l.kt)(r.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"import requests\n\nurl = \"https://hub-try.pipeforce.org/api/v3/pipeline\"\n\npayload = {'pipeline': '''pipeline:\n - pdf.stamp:\n     text: \"Hello World!\"\n - drive.save:\n     path: /my-stamped.pdf '''}\nfiles=[\n  ('file',('my1.pdf',open('/my1.pdf','rb'),'application/pdf')),\n]\nheaders = {\n  'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU='\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload, files=files)\n\n"))),(0,l.kt)(r.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<String> response = Unirest.post("https://hub-try.pipeforce.org/api/v3/pipeline")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .field("pipeline", "pipeline:\\n" +\n            " - pdf.stamp:\\n" +\n            "     text: \\"Hello World!\\"\\n" +\n            " - drive.save:\\n" +\n            "     path: /my-stamped.pdf")\n  .field("file", new File("/my1.pdf"))\n  .asString();\n')))),(0,l.kt)("admonition",{title:"Note",type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"Note that the pipeline has the part name ",(0,l.kt)("inlineCode",{parentName:"p"},"pipeline")," and one or more files must all have the name ",(0,l.kt)("inlineCode",{parentName:"p"},"file"),".")),(0,l.kt)("h2",{id:"http-api-for-persisted-pipeline-calls"},"HTTP API for persisted pipeline calls"),(0,l.kt)("p",null,"It is also possible to load and execute a pipline stored in the property store by sending a HTTP POST request to "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"/api/v3/pipeline:<key>\n")),(0,l.kt)("p",null,"Whereas ",(0,l.kt)("inlineCode",{parentName:"p"},"<key>")," must be replaced by the property key of the pipeline to be executed."),(0,l.kt)("p",null,"Instead of using the property key, you can also set the uuid of the pipeline property:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"/api/v3/pipeline:uuid:<uuid>\n")),(0,l.kt)("p",null,"Whereas ",(0,l.kt)("inlineCode",{parentName:"p"},"<uuid>")," must be replaced by the uuid of the pipeline property to be loaded and executed. This approach has the advantage that it will work even if the pipeline has been moved / renamed to a different key."),(0,l.kt)("p",null,"Any request parameter given will be set as variables to the pipeline."),(0,l.kt)("p",null,"In case there is a body in the request, it will be set as body to the pipeline. If header ",(0,l.kt)("inlineCode",{parentName:"p"},"ContentType")," is set to ",(0,l.kt)("inlineCode",{parentName:"p"},"application/json")," the body will be parsed to a JSON object and provided as such as pipeline body. Otherwise, the body will be provided as ",(0,l.kt)("a",{parentName:"p",href:"/docs/guides/contentobject"},"content object"),"."),(0,l.kt)("h3",{id:"http-methods-2"},"HTTP Methods"),(0,l.kt)("p",null,"In order to execute a persisted pipeline on the backend, you need to send a HTTP POST request to the endpoint ",(0,l.kt)("inlineCode",{parentName:"p"},"/api/v3/pipeline:<key>")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"/api/v3/pipeline:uuid:<uuid>")," by using one of these HTTP options:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"HTTP Method"),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"Content-Type")),(0,l.kt)("th",{parentName:"tr",align:null},"Request Body"),(0,l.kt)("th",{parentName:"tr",align:null},"Message Body"),(0,l.kt)("th",{parentName:"tr",align:null},"Execution"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"is set to")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"is set to")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"is set to")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"will become")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"is"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"POST")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"application/json")),(0,l.kt)("td",{parentName:"tr",align:null},"A JSON data document."),(0,l.kt)("td",{parentName:"tr",align:null},"The JSON data document parsed to a JSON instance."),(0,l.kt)("td",{parentName:"tr",align:null},"The persisted pipeline loaded from the property store using its key or uuid.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"POST")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"Any")),(0,l.kt)("td",{parentName:"tr",align:null},"Any data."),(0,l.kt)("td",{parentName:"tr",align:null},"The data from the body provided as a content object"),(0,l.kt)("td",{parentName:"tr",align:null},"The persisted pipeline loaded from the property store using its key or uuid.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"POST")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"None")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"None")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"null")),(0,l.kt)("td",{parentName:"tr",align:null},"The persisted pipeline loaded from the property store using its key or uuid.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"PUT")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"application/json")),(0,l.kt)("td",{parentName:"tr",align:null},"A JSON pipeline."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"None")),(0,l.kt)("td",{parentName:"tr",align:null},"The pipeline given as JSON in the request body will be converted and stored as YAML property with key given by ",(0,l.kt)("inlineCode",{parentName:"td"},"<key>")," from request path. In case a pipeline with such key already exists, updates the existing one.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"PUT")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"application/yaml")),(0,l.kt)("td",{parentName:"tr",align:null},"A YAML pipeline."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"None")),(0,l.kt)("td",{parentName:"tr",align:null},"The pipeline given as YAML in the request body will be stored as YAML property with key given by ",(0,l.kt)("inlineCode",{parentName:"td"},"<key>")," from request path. In case a pipeline with such key already exists, updates the existing one.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"PUT")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"application/x-www-form-urlencoded")),(0,l.kt)("td",{parentName:"tr",align:null},"An url encoded pipeline URI."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"None")),(0,l.kt)("td",{parentName:"tr",align:null},"The pipeline given as url encoded pipeline URI in the request body will be converted and stored as YAML property with key given by ",(0,l.kt)("inlineCode",{parentName:"td"},"<key>")," from request path. In case a pipeline with such key already exists, updates the existing one.")))),(0,l.kt)("h3",{id:"example-9-execute-persisted-pipeline"},"Example 9: Execute persisted pipeline"),(0,l.kt)("p",null,"In this example a pipeline persisted under key ",(0,l.kt)("inlineCode",{parentName:"p"},"global/app/myapp/pipeline/mypipeline")," will be loaded and executed at the backend without any body an request parameters:"),(0,l.kt)(p.Z,{mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -u 'username:password' \\\n  -X POST 'https://hub-<your-domain>/api/v3/pipeline:global/app/myapp/pipeline/mypipeline'\n"))),(0,l.kt)(r.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"POST /api/v3/pipeline:global/app/myapp/pipeline/mypipeline HTTP/1.1 \nHost: hub-<your-domain>\n"))),(0,l.kt)(r.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar FormData = require('form-data');\n\nvar config = {\n  method: 'post',\n  url: 'https://hub-<your-domain>/api/v3/pipeline:global/app/myapp/pipeline/mypipeline',\n  headers: { \n    'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU='\n  }\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n\n"))),(0,l.kt)(r.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"import requests\n\nurl = \"https://hub-<your-domain>/api/v3/pipeline:global/app/myapp/pipeline/mypipeline\"\n\nheaders = {\n  'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU='\n}\n\nresponse = requests.request(\"POST\", url, headers=headers)\n\n"))),(0,l.kt)(r.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<String> response = Unirest.post("https://hub-<your-domain>/api/v3/pipeline:global/app/myapp/pipeline/mypipeline")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .asString();\n')))),(0,l.kt)("h3",{id:"example-10-store-a-pipeline"},"Example 10: Store a pipeline"),(0,l.kt)("p",null,"In this example a new persisted pipeline will be created under key ",(0,l.kt)("inlineCode",{parentName:"p"},"global/app/myapp/pipeline/newpipeline"),"."),(0,l.kt)(p.Z,{mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -u 'username:password' \\\n  -h 'Content-Type: application/yaml' \\\n  -X PUT 'https://hub-<your-domain>/api/v3/pipeline:global/app/myapp/pipeline/newpipeline' \\\n  --data-raw 'pipeline:\n    - log:\n        message: \"HELLO WORLD!\"'\n"))),(0,l.kt)(r.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'PUT /api/v3/pipeline:global/app/myapp/pipeline/newpipeline HTTP/1.1 \nHost: hub-<your-domain>\nContent-Type: application/yaml\nAuthorization: Basic cGFzc3dvcmQ6dXNlcm5hbWU=\nContent-Length: 52\n\npipeline:\n    - log:\n        message: "HELLO WORLD!"\n'))),(0,l.kt)(r.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar data = 'pipeline:\\n    - log:\\n        message: \"HELLO WORLD!\"';\n\nvar config = {\n  method: 'put',\n  url: 'https://hub-<your-domain>/api/v3/pipeline:global/app/myapp/pipeline/newpipeline',\n  headers: { \n    'Content-Type': 'application/yaml',\n    'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU='\n  },\n  data: data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n\n"))),(0,l.kt)(r.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"import requests\n\nurl = \"https://hub-<your-domain>/api/v3/pipeline:global/app/myapp/pipeline/mypipeline\"\npayload = \"pipeline:\\n    - log:\\n        message: \\\"HELLO WORLD!\\\"\"\n\nheaders = {\n  'Content-Type': 'application/yaml',\n  'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU='\n}\n\nresponse = requests.request(\"PUT\", url, headers=headers, data=payload)\n\n"))),(0,l.kt)(r.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<String> response = Unirest.post("https://hub-<your-domain>/api/v3/pipeline:global/app/myapp/pipeline/newpipeline")\n  .header("Content-Type", "application/yaml")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .body("pipeline:\\n    - log:\\n        message: \\"HELLO WORLD!\\"")\n  .asString();\n')))),(0,l.kt)("h2",{id:"report-an-issue"},"Report an Issue"),(0,l.kt)("admonition",{title:"Your help is needed!",type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"In case you're missing something on this page, you found an error or you have an idea for improvement, please ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/pipeforce/pipeforce.github.io/issues/new"},"click here to create a new issue"),". Another way to contribute is, to click ",(0,l.kt)("strong",{parentName:"p"},"Edit this page")," below and directly add your changes in GitHub. Many thanks for your contribution in order to improve PIPEFORCE!")))}c.isMDXComponent=!0}}]);