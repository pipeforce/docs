"use strict";(self.webpackChunkdevdocs=self.webpackChunkdevdocs||[]).push([[2153],{3905:(e,n,a)=>{a.d(n,{Zo:()=>c,kt:()=>u});var r=a(7294);function t(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){t(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function l(e,n){if(null==e)return{};var a,r,t=function(e,n){if(null==e)return{};var a,r,t={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var p=r.createContext({}),m=function(e){var n=r.useContext(p),a=n;return e&&(a="function"==typeof e?e(n):i(i({},n),e)),a},c=function(e){var n=m(e.components);return r.createElement(p.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var a=e.components,t=e.mdxType,o=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=m(a),u=t,h=d["".concat(p,".").concat(u)]||d[u]||s[u]||o;return a?r.createElement(h,i(i({ref:n},c),{},{components:a})):r.createElement(h,i({ref:n},c))}));function u(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var o=a.length,i=new Array(o);i[0]=d;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:t,i[1]=l;for(var m=2;m<o;m++)i[m]=a[m];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}d.displayName="MDXCreateElement"},8545:(e,n,a)=>{a.r(n),a.d(n,{contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=a(7462),t=(a(7294),a(3905));const o={},i="Error Handling",l={unversionedId:"guides/commands_pipelines/error_handling",id:"guides/commands_pipelines/error_handling",isDocsHomePage:!1,title:"Error Handling",description:"In case an error occurs during execution of a command, the execution of the command and/or the according pipeline stops by default and an error message is sent back to the caller. You have different options to adjust this default behaviour.",source:"@site/docs/guides/commands_pipelines/50_error_handling.md",sourceDirName:"guides/commands_pipelines",slug:"/guides/commands_pipelines/error_handling",permalink:"/docs/guides/commands_pipelines/error_handling",editUrl:"https://github.com/pipeforce/pipeforce.github.io/edit/master/docs/guides/commands_pipelines/50_error_handling.md",tags:[],version:"current",sidebarPosition:50,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Versioning",permalink:"/docs/guides/commands_pipelines/command_versioning"},next:{title:"3. Connectors",permalink:"/docs/guides/connectors"}},p=[{value:"Ignore error",id:"ignore-error",children:[],level:2},{value:"Ignore but log error",id:"ignore-but-log-error",children:[],level:2},{value:"Stop execution",id:"stop-execution",children:[],level:2},{value:"Rollback <code>preview</code>",id:"rollback-preview",children:[],level:2},{value:"Retry execution",id:"retry-execution",children:[{value:"Parameters",id:"parameters",children:[],level:3}],level:2}],m={toc:p};function c(e){let{components:n,...a}=e;return(0,t.kt)("wrapper",(0,r.Z)({},m,a,{components:n,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"error-handling"},"Error Handling"),(0,t.kt)("p",null,"In case an error occurs during execution of a command, the execution of the command and/or the according pipeline stops by default and an error message is sent back to the caller. You have different options to adjust this default behaviour."),(0,t.kt)("h2",{id:"ignore-error"},"Ignore error"),(0,t.kt)("p",null,"In order to ignore the error, you can set the ",(0,t.kt)("inlineCode",{parentName:"p"},"action")," of the pipeline header ",(0,t.kt)("inlineCode",{parentName:"p"},"onError")," to ",(0,t.kt)("inlineCode",{parentName:"p"},"IGNORE"),". In this case, a short message about the error will be logged and after this, the pipeline will go on with the next command. Here is an example to set this header globally for all commands in a pipeline:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: {"action": "IGNORE"}\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"You can also use the short form like this:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: "IGNORE"\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"You can specify this also as parameter per command:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n    onError: {"action": "IGNORE"}\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"Or in short:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n    onError: "IGNORE"\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"In case you specify ",(0,t.kt)("inlineCode",{parentName:"p"},"onError")," as Pipeline header ",(0,t.kt)("strong",{parentName:"p"},"and")," as Command parameter, the parameter will have precendence."),(0,t.kt)("h2",{id:"ignore-but-log-error"},"Ignore but log error"),(0,t.kt)("p",null,"In order to ignore the error, but log the full stacktrace with all detail information, you can set the ",(0,t.kt)("inlineCode",{parentName:"p"},"action")," of the pipeline header ",(0,t.kt)("inlineCode",{parentName:"p"},"onError")," to ",(0,t.kt)("inlineCode",{parentName:"p"},"LOG"),". In this case, the full stacktrace message about the error will be logged and after this, the pipeline will go on with the next command. Here is an example to set this header in a pipeline:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: {"action": "LOG"}\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"You can also use the short form like this:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: "LOG"\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"You can specify this also as parameter per command:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n    onError: {"action": "LOG"}\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"Or in short:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n    onError: "LOG"\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"In case you specify ",(0,t.kt)("inlineCode",{parentName:"p"},"onError")," as Pipeline header ",(0,t.kt)("strong",{parentName:"p"},"and")," as Command parameter, the parameter will have precendence."),(0,t.kt)("h2",{id:"stop-execution"},"Stop execution"),(0,t.kt)("p",null,"If you would like to stop execuction of the command and/or the pipeline in case an error occurs, you need to set the ",(0,t.kt)("inlineCode",{parentName:"p"},"action")," of the pipeline header ",(0,t.kt)("inlineCode",{parentName:"p"},"onError")," to ",(0,t.kt)("inlineCode",{parentName:"p"},"THROW"),". In this case, the full stacktrace message about the error will be logged and after this, the execution of the command and/or the pipeline will stop. Here is an example to set this header in a pipeline:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: {"action": "THROW"}\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"You can also use the short form like this:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: "THROW"\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"You can specify this also as parameter per command:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n    onError: {"action": "THROW"}\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"Or in short:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n    onError: "THROW"\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("h2",{id:"rollback-preview"},"Rollback ",(0,t.kt)("inlineCode",{parentName:"h2"},"preview")),(0,t.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,t.kt)("div",{parentName:"div",className:"admonition-heading"},(0,t.kt)("h5",{parentName:"div"},(0,t.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,t.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,t.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,t.kt)("div",{parentName:"div",className:"admonition-content"},(0,t.kt)("p",{parentName:"div"},"This action is currently a preview and not activated in main branch. Please give feedback! Thank you."))),(0,t.kt)("p",null,"If you would like to execute some rollback actions in case an error occured in a command, you need to set the ",(0,t.kt)("inlineCode",{parentName:"p"},"action")," parameter of the pipeline header ",(0,t.kt)("inlineCode",{parentName:"p"},"onError")," to ",(0,t.kt)("inlineCode",{parentName:"p"},"ROLLBACK")," and additionally specify the parameter ",(0,t.kt)("inlineCode",{parentName:"p"},"pipeline"),". In this case, the full stacktrace message about the error will be logged and after this, the given pipeline will be executed which contains the rollback logics. Here is an example to set this header in a pipeline:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: {"action": "ROLLBACK",  "pipeline": "uri:property:global/app/myapp/pipeline/rollback"}\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"In case an error occurs, the persisted pipeline ",(0,t.kt)("inlineCode",{parentName:"p"},"global/app/myapp/pipeline/rollback")," will be loaded from the property store and executed."),(0,t.kt)("p",null,"You can specify this also as parameter per command:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n    onError: {"action": "ROLLBACK",  "pipeline": "uri:property:global/app/myapp/pipeline/rollback"}\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"In case you specify ",(0,t.kt)("inlineCode",{parentName:"p"},"onError")," as Pipeline header ",(0,t.kt)("strong",{parentName:"p"},"and")," as Command parameter, the parameter will have precendence."),(0,t.kt)("p",null,"There is no short form for this action."),(0,t.kt)("h2",{id:"retry-execution"},"Retry execution"),(0,t.kt)("p",null,"It's also possible to retry a command after an error has been occured, executing it. In this case, after the ",(0,t.kt)("inlineCode",{parentName:"p"},"wait")," amount of seconds, the command will be re-executed the configured amount of ",(0,t.kt)("inlineCode",{parentName:"p"},"times"),". And finally, if the error still exists, a final action will be executed, defined by ",(0,t.kt)("inlineCode",{parentName:"p"},"then"),". Here is an example to set this header in a pipeline:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: {"action": "RETRY", "times": 3,  "wait": 2,  "then": {"action": "THROW"} }\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"Or shorter:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: {"action": "RETRY", "times": 3,  "wait": 2,  "then": "THROW" }\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"You can specify this also as parameter per command:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n      onError: {"action": "RETRY", "times": 3,  "wait": 2,  "then": {"action": "THROW"} }\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"Or shorter:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n      onError: {"action": "RETRY", "times": 3,  "wait": 2,  "then": "THROW" }\n  commandB:\n    paramB: valueB\n')),(0,t.kt)("p",null,"In case you specify ",(0,t.kt)("inlineCode",{parentName:"p"},"onError")," as Pipeline header ",(0,t.kt)("strong",{parentName:"p"},"and")," as Command parameter, the parameter will have precendence."),(0,t.kt)("p",null,"In case an error happens in this example, the system will wait for ",(0,t.kt)("inlineCode",{parentName:"p"},"2")," seconds and then will re-execute the same command. This will be repeated for ",(0,t.kt)("inlineCode",{parentName:"p"},"3")," times. And if after 3 times the error still occurs, then the ",(0,t.kt)("inlineCode",{parentName:"p"},"THROW")," action will be executed, which logs the error stacktrace and then stops executing the command/pipeline. Instead of ",(0,t.kt)("inlineCode",{parentName:"p"},"THROW")," you can also define any of the other actions mentioned before in short or long form including their parameters, except the ",(0,t.kt)("inlineCode",{parentName:"p"},"RETRY")," action."),(0,t.kt)("h3",{id:"parameters"},"Parameters"),(0,t.kt)("p",null,"The optional parameters of the ",(0,t.kt)("inlineCode",{parentName:"p"},"RETRY")," action are:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},"wait"),": The time to wait in seconds before the next retry starts. Defaults to ",(0,t.kt)("inlineCode",{parentName:"li"},"3")," seconds."),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},"times"),": The number of retries before giving up and executing the ",(0,t.kt)("inlineCode",{parentName:"li"},"then")," action. Defaults to ",(0,t.kt)("inlineCode",{parentName:"li"},"1"),"."),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},"then"),": The final action to do in case the error still occurs after the given amount of retries. Can be one of ",(0,t.kt)("inlineCode",{parentName:"li"},"IGNORE"),", ",(0,t.kt)("inlineCode",{parentName:"li"},"LOG"),", ",(0,t.kt)("inlineCode",{parentName:"li"},"THROW")," or ",(0,t.kt)("inlineCode",{parentName:"li"},"ROLLBACK"),". Defaults to ",(0,t.kt)("inlineCode",{parentName:"li"},"THROW"),".")))}c.isMDXComponent=!0}}]);