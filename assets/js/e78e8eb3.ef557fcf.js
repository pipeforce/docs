"use strict";(self.webpackChunkdevdocs=self.webpackChunkdevdocs||[]).push([[6806],{3905:(e,n,a)=>{a.d(n,{Zo:()=>m,kt:()=>c});var t=a(7294);function l(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function p(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){l(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function r(e,n){if(null==e)return{};var a,t,l=function(e,n){if(null==e)return{};var a,t,l={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(l[a]=e[a]);return l}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var o=t.createContext({}),s=function(e){var n=t.useContext(o),a=n;return e&&(a="function"==typeof e?e(n):p(p({},n),e)),a},m=function(e){var n=s(e.components);return t.createElement(o.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var a=e.components,l=e.mdxType,i=e.originalType,o=e.parentName,m=r(e,["components","mdxType","originalType","parentName"]),d=s(a),c=l,k=d["".concat(o,".").concat(c)]||d[c]||u[c]||i;return a?t.createElement(k,p(p({ref:n},m),{},{components:a})):t.createElement(k,p({ref:n},m))}));function c(e,n){var a=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var i=a.length,p=new Array(i);p[0]=d;var r={};for(var o in n)hasOwnProperty.call(n,o)&&(r[o]=n[o]);r.originalType=e,r.mdxType="string"==typeof e?e:l,p[1]=r;for(var s=2;s<i;s++)p[s]=a[s];return t.createElement.apply(null,p)}return t.createElement.apply(null,a)}d.displayName="MDXCreateElement"},2095:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>p,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>s});var t=a(7462),l=(a(7294),a(3905));const i={},p="Pipeline Expression Language",r={unversionedId:"guides/commands_pipelines/pel",id:"guides/commands_pipelines/pel",title:"Pipeline Expression Language",description:"Since Version: 3.0",source:"@site/docs/guides/commands_pipelines/20_pel.md",sourceDirName:"guides/commands_pipelines",slug:"/guides/commands_pipelines/pel",permalink:"/docs/guides/commands_pipelines/pel",draft:!1,editUrl:"https://github.com/pipeforce/pipeforce.github.io/edit/master/docs/guides/commands_pipelines/20_pel.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"HTTP API",permalink:"/docs/guides/commands_pipelines/http_api"},next:{title:"Utils",permalink:"/docs/guides/commands_pipelines/utils"}},o={},s=[{value:"Basics",id:"basics",level:2},{value:"Accessing Sopes",id:"accessing-sopes",level:2},{value:"Relational operators",id:"relational-operators",level:2},{value:"Is equal <code>==</code>",id:"is-equal-",level:3},{value:"Example 1",id:"example-1",level:4},{value:"Is not equal <code>!=</code>",id:"is-not-equal-",level:3},{value:"Example 1",id:"example-1-1",level:4},{value:"Less than <code>&lt;</code>",id:"less-than-",level:3},{value:"Example 1",id:"example-1-2",level:4},{value:"Example 2",id:"example-2",level:4},{value:"Less or equal than <code>&lt;=</code>",id:"less-or-equal-than-",level:3},{value:"Example 1",id:"example-1-3",level:4},{value:"Greater than <code>&gt;</code>",id:"greater-than-",level:3},{value:"Example 1",id:"example-1-4",level:4},{value:"Greater or equal than <code>&gt;=</code>",id:"greater-or-equal-than-",level:3},{value:"Example 1",id:"example-1-5",level:4},{value:"Detect alphabetical order with <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>",id:"detect-alphabetical-order-with----",level:3},{value:"Example 1",id:"example-1-6",level:4},{value:"Regular expression matching <code>matches</code>",id:"regular-expression-matching-matches",level:3},{value:"Example 1",id:"example-1-7",level:4},{value:"Logical operators",id:"logical-operators",level:2},{value:"<code>and</code>",id:"and",level:3},{value:"Example 1",id:"example-1-8",level:4},{value:"<code>or</code>",id:"or",level:3},{value:"Example 1",id:"example-1-9",level:4},{value:"<code>not</code>,  <code>!</code>",id:"not--",level:3},{value:"Example 1",id:"example-1-10",level:4},{value:"Example 2",id:"example-2-1",level:4},{value:"Mathematical operators",id:"mathematical-operators",level:2},{value:"Addition <code>+</code> and subtraction <code>-</code>",id:"addition--and-subtraction--",level:3},{value:"Example 1 - Addition",id:"example-1---addition",level:4},{value:"Example 2 - Subtraction",id:"example-2---subtraction",level:4},{value:"Example 3 - Addition an subtraction",id:"example-3---addition-an-subtraction",level:4},{value:"Example 4 - String concatenation",id:"example-4---string-concatenation",level:4},{value:"Multiplication <code>*</code> and division <code>/</code>, <code>%</code>",id:"multiplication--and-division--",level:3},{value:"Example 1 - Multiplication",id:"example-1---multiplication",level:4},{value:"Example 2 - Negative multiplication",id:"example-2---negative-multiplication",level:4},{value:"Example 3 - Division",id:"example-3---division",level:4},{value:"Example 4 - Modulus",id:"example-4---modulus",level:4},{value:"Example 5 - Operator precedence",id:"example-5---operator-precedence",level:4},{value:"Example 6 - Brackets",id:"example-6---brackets",level:4},{value:"Assignment",id:"assignment",level:2},{value:"Example 1",id:"example-1-11",level:4},{value:"Example 2",id:"example-2-2",level:4},{value:"Working with lists <code>{,}</code> and maps <code>{:}</code>",id:"working-with-lists--and-maps-",level:2},{value:"Creating a new list",id:"creating-a-new-list",level:3},{value:"Example 1 - A new empty list",id:"example-1---a-new-empty-list",level:4},{value:"Example 2 - A new list with default content",id:"example-2---a-new-list-with-default-content",level:4},{value:"Example 3 - A new, nested list",id:"example-3---a-new-nested-list",level:4},{value:"Accessing lists and arrays",id:"accessing-lists-and-arrays",level:3},{value:"Example 1",id:"example-1-12",level:4},{value:"Creating a new map / dictionary",id:"creating-a-new-map--dictionary",level:3},{value:"Example 1 - A new empty map",id:"example-1---a-new-empty-map",level:4},{value:"Example 2 - A new map with default values",id:"example-2---a-new-map-with-default-values",level:4},{value:"Example 3 - A new map with later binding",id:"example-3---a-new-map-with-later-binding",level:4},{value:"Accessing maps/dictionaries",id:"accessing-mapsdictionaries",level:3},{value:"Example 1",id:"example-1-13",level:4},{value:"Navigating objects",id:"navigating-objects",level:2},{value:"Example",id:"example",level:3},{value:"Avoid NullPointerException",id:"avoid-nullpointerexception",level:3},{value:"Filtering",id:"filtering",level:2},{value:"Selection Expression <code>.?</code>",id:"selection-expression-",level:3},{value:"Example 1",id:"example-1-14",level:4},{value:"Projection Expression <code>.!</code>",id:"projection-expression-",level:3},{value:"Example 1",id:"example-1-15",level:4},{value:"Ternary Operator (If-Then-Else)",id:"ternary-operator-if-then-else",level:2},{value:"Functions",id:"functions",level:2},{value:"Report an Issue",id:"report-an-issue",level:2}],m={toc:s};function u(e){let{components:n,...a}=e;return(0,l.kt)("wrapper",(0,t.Z)({},m,a,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"pipeline-expression-language"},"Pipeline Expression Language"),(0,l.kt)("p",{class:"theme-doc-version-badge badge badge--secondary"},"Since Version: 3.0"),(0,l.kt)("p",null,"The ",(0,l.kt)("strong",{parentName:"p"},"Pipeline Expression Language (PEL)")," or just ",(0,l.kt)("em",{parentName:"p"},"PE (Pipeline Expression)")," is a powerful and easy to learn expression language based on ",(0,l.kt)("a",{parentName:"p",href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#expressions"},"Spring EL"),' and adds additional features to this widely used "defacto-standard" expression language. It can be used inside a pipeline to dynamically calculate and set values. For data mapping, transformation and to dynamically calculate, set and change values at processing time of a pipeline.'),(0,l.kt)("admonition",{title:"Note",type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"The Pipeline Expression Language is optional. You do not need it for basic tasks. But it gives you additional flexibility and power to automate and integrate nearly any process since it is optimized exactly for this. So it is wise to learn at least the basics of it. Typically, it is easier to learn than a programming language. "),(0,l.kt)("p",{parentName:"admonition"},(0,l.kt)("strong",{parentName:"p"},"It depends on your basic knowdlegde, but in average it is a matter of about 15-30 minutes to understand and use the basic concepts of this powerful expression language.")," ")),(0,l.kt)("h2",{id:"basics"},"Basics"),(0,l.kt)("p",null,"Typically a PE starts with ",(0,l.kt)("inlineCode",{parentName:"p"},"${")," and ends with ",(0,l.kt)("inlineCode",{parentName:"p"},"}"),". Here is a simple example of a PE, placed inside the value of a command parameter:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${1 + 1}\n")),(0,l.kt)("p",null,"Optionally, you can also use ",(0,l.kt)("inlineCode",{parentName:"p"},"#{")," to start a PE, but this must be placed inside quotes ",(0,l.kt)("inlineCode",{parentName:"p"},'"')," and ",(0,l.kt)("inlineCode",{parentName:"p"},'"'),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  - log:\n      message: "#{1 + 1}"\n')),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"2\n")),(0,l.kt)("admonition",{title:"Note",type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"The PE prefix ",(0,l.kt)("inlineCode",{parentName:"p"},"#{")," is only meant as an alternative in case ",(0,l.kt)("inlineCode",{parentName:"p"},"${")," cannot be used in some situations. Using ",(0,l.kt)("inlineCode",{parentName:"p"},"${")," should be preferred whenever possible.")),(0,l.kt)("p",null,"A PE can be placed in the value part of pipeline headers and values, in parameter values of most commands and in the body of a pipeline. It uses ",(0,l.kt)("em",{parentName:"p"},"late binding"),": It will be executed only in case the according entry (header, variable, command parameter, ...) is referenced somewhere. It also supports interpolation in order to use the PEL like a template language inside a text string. So string concatenation can be done like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  - log:\n      message: "Result: ${1 + 1}"\n')),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Result: 2\n")),(0,l.kt)("h2",{id:"accessing-sopes"},"Accessing Sopes"),(0,l.kt)("p",null,"Inside a Pipeline Expression, you can access the values of the pipeline scopes like ",(0,l.kt)("inlineCode",{parentName:"p"},"headers"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"vars")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"body"),". These scopes are provided as implicity objects and therefore they're available inside any Pipeline Expression."),(0,l.kt)("p",null,"Let's assume, you have defined a variable ",(0,l.kt)("inlineCode",{parentName:"p"},"counter")," and you would like to access this counter in your expression, then you could write an expression like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"${vars.counter}\n")),(0,l.kt)("p",null,"Here is an example of a pipeline which uses this expression and outputs the value of ",(0,l.kt)("inlineCode",{parentName:"p"},"counter")," to the body:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'vars:\n  counter: 12\n\npipeline:\n  - body.set:\n      value: "The counter is: ${vars.counter}"\n')),(0,l.kt)("p",null,"This will result in an output like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"The counter is: 12\n")),(0,l.kt)("p",null,"Similar you could fo with the ",(0,l.kt)("inlineCode",{parentName:"p"},"headers")," scope:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  contentType: "text/plain"\n\npipeline:\n  - body.set:\n      value: "The type is: ${headers.contentType}"\n')),(0,l.kt)("p",null,"This will result in an output like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"The type is: text/plain\n")),(0,l.kt)("h2",{id:"relational-operators"},"Relational operators"),(0,l.kt)("h3",{id:"is-equal-"},"Is equal ",(0,l.kt)("inlineCode",{parentName:"h3"},"==")),(0,l.kt)("h4",{id:"example-1"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  - log:\n      message: "${2 == 1}"\n')),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"false\n")),(0,l.kt)("h3",{id:"is-not-equal-"},"Is not equal ",(0,l.kt)("inlineCode",{parentName:"h3"},"!=")),(0,l.kt)("h4",{id:"example-1-1"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${2 != 1}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"true\n")),(0,l.kt)("h3",{id:"less-than-"},"Less than ",(0,l.kt)("inlineCode",{parentName:"h3"},"<")),(0,l.kt)("h4",{id:"example-1-2"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${1 < 5}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"true\n")),(0,l.kt)("h4",{id:"example-2"},"Example 2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${0.5 < 1}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"true\n")),(0,l.kt)("h3",{id:"less-or-equal-than-"},"Less or equal than ",(0,l.kt)("inlineCode",{parentName:"h3"},"<=")),(0,l.kt)("h4",{id:"example-1-3"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: #{1 <= 5}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"true\n")),(0,l.kt)("h3",{id:"greater-than-"},"Greater than ",(0,l.kt)("inlineCode",{parentName:"h3"},">")),(0,l.kt)("h4",{id:"example-1-4"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${1 > 5}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"false\n")),(0,l.kt)("h3",{id:"greater-or-equal-than-"},"Greater or equal than ",(0,l.kt)("inlineCode",{parentName:"h3"},">=")),(0,l.kt)("h4",{id:"example-1-5"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${5 >= 5}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"true\n")),(0,l.kt)("h3",{id:"detect-alphabetical-order-with----"},"Detect alphabetical order with ",(0,l.kt)("inlineCode",{parentName:"h3"},"<"),", ",(0,l.kt)("inlineCode",{parentName:"h3"},">"),", ",(0,l.kt)("inlineCode",{parentName:"h3"},"<="),", ",(0,l.kt)("inlineCode",{parentName:"h3"},">=")),(0,l.kt)("h4",{id:"example-1-6"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${'Adam' < 'Zacharias'}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"true\n")),(0,l.kt)("h3",{id:"regular-expression-matching-matches"},"Regular expression matching ",(0,l.kt)("inlineCode",{parentName:"h3"},"matches")),(0,l.kt)("h4",{id:"example-1-7"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${'5.0067' matches '^-?\\\\d+(\\\\.\\\\d{2})?$'}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"false\n")),(0,l.kt)("h2",{id:"logical-operators"},"Logical operators"),(0,l.kt)("h3",{id:"and"},(0,l.kt)("inlineCode",{parentName:"h3"},"and")),(0,l.kt)("h4",{id:"example-1-8"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${true and false}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"false\n")),(0,l.kt)("h3",{id:"or"},(0,l.kt)("inlineCode",{parentName:"h3"},"or")),(0,l.kt)("h4",{id:"example-1-9"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: #{true or false}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"true\n")),(0,l.kt)("h3",{id:"not--"},(0,l.kt)("inlineCode",{parentName:"h3"},"not"),",  ",(0,l.kt)("inlineCode",{parentName:"h3"},"!")),(0,l.kt)("h4",{id:"example-1-10"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${!true}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"false\n")),(0,l.kt)("h4",{id:"example-2-1"},"Example 2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${not true}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"false\n")),(0,l.kt)("h2",{id:"mathematical-operators"},"Mathematical operators"),(0,l.kt)("h3",{id:"addition--and-subtraction--"},"Addition ",(0,l.kt)("inlineCode",{parentName:"h3"},"+")," and subtraction ",(0,l.kt)("inlineCode",{parentName:"h3"},"-")),(0,l.kt)("h4",{id:"example-1---addition"},"Example 1 - Addition"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${1 + 1}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"2\n")),(0,l.kt)("h4",{id:"example-2---subtraction"},"Example 2 - Subtraction"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${10 - 1}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"9\n")),(0,l.kt)("h4",{id:"example-3---addition-an-subtraction"},"Example 3 - Addition an subtraction"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${25 - 5 + 10}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"30\n")),(0,l.kt)("h4",{id:"example-4---string-concatenation"},"Example 4 - String concatenation"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${'Hello ' + 'World!'}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Hello World!\n")),(0,l.kt)("h3",{id:"multiplication--and-division--"},"Multiplication ",(0,l.kt)("inlineCode",{parentName:"h3"},"*")," and division ",(0,l.kt)("inlineCode",{parentName:"h3"},"/"),", ",(0,l.kt)("inlineCode",{parentName:"h3"},"%")),(0,l.kt)("h4",{id:"example-1---multiplication"},"Example 1 - Multiplication"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${3 * 5}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"15\n")),(0,l.kt)("h4",{id:"example-2---negative-multiplication"},"Example 2 - Negative multiplication"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${-1 * 5}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-5\n")),(0,l.kt)("h4",{id:"example-3---division"},"Example 3 - Division"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${20 / 5}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"4\n")),(0,l.kt)("h4",{id:"example-4---modulus"},"Example 4 - Modulus"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${7 % 4}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"3\n")),(0,l.kt)("h4",{id:"example-5---operator-precedence"},"Example 5 - Operator precedence"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${5 + 4 - 1 * 2}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"7\n")),(0,l.kt)("h4",{id:"example-6---brackets"},"Example 6 - Brackets"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${(5 + 4 - 1) * 2}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"16\n")),(0,l.kt)("h2",{id:"assignment"},"Assignment"),(0,l.kt)("h4",{id:"example-1-11"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  - set:\n      value: "1"\n      output: ${vars.counter}\n  - log:\n      message: ${vars.counter}\n')),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"1\n")),(0,l.kt)("h4",{id:"example-2-2"},"Example 2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"vars:\n  counter: 12\npipeline:\n  - set:\n      value: ${vars.counter + 1}\n      output: ${vars.counter}\n  - log:\n      message: ${vars.counter}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"13\n")),(0,l.kt)("h2",{id:"working-with-lists--and-maps-"},"Working with lists ",(0,l.kt)("inlineCode",{parentName:"h2"},"{,}")," and maps ",(0,l.kt)("inlineCode",{parentName:"h2"},"{:}")),(0,l.kt)("h3",{id:"creating-a-new-list"},"Creating a new list"),(0,l.kt)("h4",{id:"example-1---a-new-empty-list"},"Example 1 - A new empty list"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"vars:\n  numbers: ${{}}\npipeline:\n  - log:\n      message: ${vars.numbers}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"[]\n")),(0,l.kt)("h4",{id:"example-2---a-new-list-with-default-content"},"Example 2 - A new list with default content"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"vars:\n  numbers: ${{1, 2, 4}}\npipeline:\n  - log:\n      message: ${vars.numbers}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"[1, 2, 4]\n")),(0,l.kt)("h4",{id:"example-3---a-new-nested-list"},"Example 3 - A new, nested list"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"vars:\n  scores: ${{ {1, 3}, {5, 8} }}\npipeline:\n  - log:\n      message: ${vars.scores}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"[[1, 3], [5, 8]]\n")),(0,l.kt)("h3",{id:"accessing-lists-and-arrays"},"Accessing lists and arrays"),(0,l.kt)("h4",{id:"example-1-12"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"vars:\n  numbers: #{{1, 2, 4}}\npipeline:\n  - log:\n      message: #{vars.numbers[1]}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"2\n")),(0,l.kt)("h3",{id:"creating-a-new-map--dictionary"},"Creating a new map / dictionary"),(0,l.kt)("h4",{id:"example-1---a-new-empty-map"},"Example 1 - A new empty map"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"vars:\n  persons: ${ {:} }\npipeline:\n  - log:\n      message: ${vars.persons}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"{}\n")),(0,l.kt)("h4",{id:"example-2---a-new-map-with-default-values"},"Example 2 - A new map with default values"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"vars:\n  persons: ${ {hanna:'burger', max:'hotdog', julie:'salad'} }\npipeline:\n  - log:\n      message: ${vars.persons}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"{hanna=burger, max=hotdog, julie=salad}\n")),(0,l.kt)("h4",{id:"example-3---a-new-map-with-later-binding"},"Example 3 - A new map with later binding"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"vars:\n  persons: ${ {:} }\npipeline:\n  - log:\n      message: ${vars.persons['Hanna'] = 23}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"{Hanna=23}\n")),(0,l.kt)("h3",{id:"accessing-mapsdictionaries"},"Accessing maps/dictionaries"),(0,l.kt)("h4",{id:"example-1-13"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"vars:\n  persons: ${ {hanna:'burger', max:'hotdog', julie:'salad'} }\npipeline:\n  - log:\n      message: ${vars.persons['max']}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"hotdog\n")),(0,l.kt)("h2",{id:"navigating-objects"},"Navigating objects"),(0,l.kt)("p",null,"A PE can point to values inside an object (or nested data structure), like this JSON for example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "person": {\n    "name": "Bart Simpson",\n    "age": 12,\n    "hobbies": [\n      "skateboard",\n      "tv",\n      "pranks"\n    ]\n  }\n}\n')),(0,l.kt)("p",null,"You can navigate any structured object available inside a vars or body scope using the dot operator. For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"${person.name}\n")),(0,l.kt)("p",null,"To access a list/array, you can use the index operator ","[","]",":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"${person.hobbies[0]}\n")),(0,l.kt)("h3",{id:"example"},"Example"),(0,l.kt)("p",null,"In this more advanced example, there are different things to mention:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"We create an ",(0,l.kt)("strong",{parentName:"li"},"inline map")," as ",(0,l.kt)("strong",{parentName:"li"},"initial vars value"),"."),(0,l.kt)("li",{parentName:"ol"},"Multi line values are done by using ",(0,l.kt)("inlineCode",{parentName:"li"},"'")," (this trims any new line and space character at the beginning and end of the string, which is important to interpret it here as map instead of a string)."),(0,l.kt)("li",{parentName:"ol"},"We ",(0,l.kt)("strong",{parentName:"li"},"set the body")," using the initial vars value using the command ",(0,l.kt)("inlineCode",{parentName:"li"},"set.body")," also with a multi line value."),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("strong",{parentName:"li"},"Multiple")," lines can also be set using ",(0,l.kt)("inlineCode",{parentName:"li"},"|"),". Differently to ",(0,l.kt)("inlineCode",{parentName:"li"},"'")," in this case new lines will be kept so that the output of the body will look exactly as formatted in the value parameter. This is perfect if you want to write a template for example with exact format output as the value looks like."),(0,l.kt)("li",{parentName:"ol"},"There are comments in the configuration. A comment line starts with ",(0,l.kt)("inlineCode",{parentName:"li"},"#"),".")),(0,l.kt)("p",null,"See the official YAML documentation about how to deal with multi-line values. Here is a good summary: ",(0,l.kt)("a",{parentName:"p",href:"https://yaml-multiline.info/"},"https://yaml-multiline.info/")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'# Set inline map as initial body value\nvars: \n   data: \'${ \n      {\n        person: {\n          name: "Bart Simpson",\n          age: 12,\n          hobbies: {\n            "skateboard",\n            "tv",\n            "pranks"\n          }\n        }\n      }\n    }\'\npipeline:\n  # Set in the body a multiline string\n  - set.body:\n      value: | \n        Name:  ${vars.data.person.name}\n        Age:   ${vars.data.person.age}\n        Hobby: ${vars.data.person.hobbies[0]}\n')),(0,l.kt)("p",null,"Formatted output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Name:  Bart Simpson\nAge:   12\nHobby: skateboard\n")),(0,l.kt)("h3",{id:"avoid-nullpointerexception"},"Avoid NullPointerException"),(0,l.kt)("p",null,"In case you would like to access a property of an object which doesn't exist, a ",(0,l.kt)("inlineCode",{parentName:"p"},"NullPointerException")," will be thrown, indicating that the object you're trying to access doesn't exist. Let's see this example which will result in such an exception:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"vars:\n  data: null\npipeline:\n  set.body:\n    value: ${vars.data.name}\n")),(0,l.kt)("p",null,"This will throw an exception since the object ",(0,l.kt)("inlineCode",{parentName:"p"},"data")," is ",(0,l.kt)("inlineCode",{parentName:"p"},"null")," and therfore the property ",(0,l.kt)("inlineCode",{parentName:"p"},"name")," cannot be loaded."),(0,l.kt)("p",null,"In order to return ",(0,l.kt)("inlineCode",{parentName:"p"},"null")," instead of throwing an exception, you can use the safe navigation operator ",(0,l.kt)("inlineCode",{parentName:"p"},"?."),". This example will not throw an exception. Instead, it will simply put ",(0,l.kt)("inlineCode",{parentName:"p"},"null")," into the body:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"vars:\n  data: null\npipeline:\n  set.body:\n    value: ${vars.data?.name}\n")),(0,l.kt)("p",null,"It is also possible to use this operator on nested properties:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"vars:\n  data: null\npipeline:\n  set.body:\n    value: ${vars.data?.deep?.deeper?.value}\n")),(0,l.kt)("p",null,"This example will also put ",(0,l.kt)("inlineCode",{parentName:"p"},"null")," into the body instead of throwing a ",(0,l.kt)("inlineCode",{parentName:"p"},"NullPointerException"),"."),(0,l.kt)("h2",{id:"filtering"},"Filtering"),(0,l.kt)("p",null,"The PEL can be used to filter lists in an easy way. "),(0,l.kt)("h3",{id:"selection-expression-"},"Selection Expression ",(0,l.kt)("inlineCode",{parentName:"h3"},".?")),(0,l.kt)("p",null,"With the selection syntax you can select a subset of items from a given collection to be returned as new collection by specifying a selection expression."),(0,l.kt)("p",null,"Similar to the ",(0,l.kt)("inlineCode",{parentName:"p"},"WHERE")," part of an SQL query."),(0,l.kt)("p",null,"The syntax is like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"collectionName.?[selectionExpression]\n")),(0,l.kt)("p",null,"Whereas ",(0,l.kt)("inlineCode",{parentName:"p"},"collectionName")," is the variable name of the collection (can be an array, map, list, aso.) and ",(0,l.kt)("inlineCode",{parentName:"p"},"selectionExpression")," is the expression which selects the items to be returned from the list."),(0,l.kt)("h4",{id:"example-1-14"},"Example 1"),(0,l.kt)("p",null,"Lets assume we have a collection of entities like this stored in the body:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'[\n  {\n    "person": {\n      "name": "Bart Simpson",\n      "age": 12,\n      "hobbies": [\n        "skateboard",\n        "tv",\n        "pranks"\n      ]\n    }\n  },\n  {\n    "person": {\n      "name": "Maggie Simpson",\n      "age": 1,\n      "hobbies": [\n        "drinking milk",\n        "crawling",\n        "crying"\n      ]\n    }\n  }\n]\n')),(0,l.kt)("p",null,"Then, we can select a subset of the entries using a selection like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: ${body.?[person.name == 'Maggie Simpson']}\n")),(0,l.kt)("p",null,"Output would be a ",(0,l.kt)("strong",{parentName:"p"},"sublist")," with the entries matching the criteria:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "person": {\n      "name": "Maggie Simpson",\n      "age": 1,\n      "hobbies": [\n        "drinking milk",\n        "crawling",\n        "crying"\n      ]\n    }\n  }\n]\n')),(0,l.kt)("p",null,"Here is the same example but with the data set embedded into the pipeline in the vars scope:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'vars: \n   data: \'${{\n        {\n          person: {\n            name: "Bart Simpson",\n            age: 12,\n            hobbies: {\n              "skateboard",\n              "tv",\n              "pranks"\n            }\n          }\n        },\n        {\n          person: {\n            name: "Maggie Simpson",\n            age: 1,\n            hobbies: {\n              "drinking milk",\n              "crawling",\n              "crying"\n            }\n          }\n        }\n      }}\'\npipeline:\n  - log:\n      message: ${vars.data.?[person.name == \'Maggie Simpson\']}\n')),(0,l.kt)("h3",{id:"projection-expression-"},"Projection Expression ",(0,l.kt)("inlineCode",{parentName:"h3"},".!")),(0,l.kt)("p",null,"With the projection syntax you can select specific property values out from a collection of objects."),(0,l.kt)("p",null,"Similar to the ",(0,l.kt)("inlineCode",{parentName:"p"},"SELECT")," part of an SQL query."),(0,l.kt)("p",null,"The syntax is like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"collectionName.![projectionExpression]\n")),(0,l.kt)("p",null,"Whereas ",(0,l.kt)("inlineCode",{parentName:"p"},"collectionName")," is the variable name of the collection (can be an array, map, list, aso.) and ",(0,l.kt)("inlineCode",{parentName:"p"},"projectionExpression")," is the expression which selects the properties to be returned from each object in the list."),(0,l.kt)("h4",{id:"example-1-15"},"Example 1"),(0,l.kt)("p",null,"Lets assume we have a collection of entities like this stored in the body:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'[\n  {\n    "person": {\n      "name": "Bart Simpson",\n      "age": 12,\n      "hobbies": [\n        "skateboard",\n        "tv",\n        "pranks"\n      ]\n    }\n  },\n  {\n    "person": {\n      "name": "Maggie Simpson",\n      "age": 1,\n      "hobbies": [\n        "drinking milk",\n        "crawling",\n        "crying"\n      ]\n    }\n  }\n]\n')),(0,l.kt)("p",null,"Then, we can select properties from this collection like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - log:\n      message: #{body.![person.name]}\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"['Bart Simpson', 'Maggie Simpson']\n")),(0,l.kt)("p",null,"And here the example with embedded data set in the vars scope:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'vars: \n   data: \'${{\n        {\n          person: {\n            name: "Bart Simpson",\n            age: 12,\n            hobbies: {\n              "skateboard",\n              "tv",\n              "pranks"\n            }\n          }\n        },\n        {\n          person: {\n            name: "Maggie Simpson",\n            age: 1,\n            hobbies: {\n              "drinking milk",\n              "crawling",\n              "crying"\n            }\n          }\n        }\n      }}\'\npipeline:\n  - log:\n      message: ${vars.data.![person.name]}\n')),(0,l.kt)("h2",{id:"ternary-operator-if-then-else"},"Ternary Operator (If-Then-Else)"),(0,l.kt)("p",null,"The ternary operator can be used to define an if-then-else condition in your expression in a single line."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"pipeline:\n  - set.body:\n      value: ${10 > 100 ? 'condition is true' : 'condition is false'}\n")),(0,l.kt)("p",null,"This example would output ",(0,l.kt)("inlineCode",{parentName:"p"},"condition is false")," in the body. As you can see, the part left of the question mark ",(0,l.kt)("inlineCode",{parentName:"p"},"?")," defines the condition to be evaluated. If this condition evaluates to ",(0,l.kt)("inlineCode",{parentName:"p"},"true"),", then the part left of the colon ",(0,l.kt)("inlineCode",{parentName:"p"},":")," is executed. Otherwise the right part:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"condition ? trueExpression : falseExpression\n")),(0,l.kt)("h2",{id:"functions"},"Functions"),(0,l.kt)("p",null,"There are many built-in functions available which additionally can simplify your automation and integration tasks. See chapter ",(0,l.kt)("a",{parentName:"p",href:"/docs/guides/commands_pipelines/functions"},"Built-In Functions")," for more details."),(0,l.kt)("p",null,"If you would like to create your own functions instead, see chapter ",(0,l.kt)("a",{parentName:"p",href:"/docs/guides/commands_pipelines/custom_functions"},"Custom Functions"),"."),(0,l.kt)("h2",{id:"report-an-issue"},"Report an Issue"),(0,l.kt)("admonition",{title:"Your help is needed!",type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"In case you're missing something on this page, you found an error or you have an idea for improvement, please ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/pipeforce/pipeforce.github.io/issues/new"},"click here to create a new issue"),". Another way to contribute is, to click ",(0,l.kt)("strong",{parentName:"p"},"Edit this page")," below and directly add your changes in GitHub. Many thanks for your contribution in order to improve PIPEFORCE!")))}u.isMDXComponent=!0}}]);