"use strict";(self.webpackChunkdevdocs=self.webpackChunkdevdocs||[]).push([[8046],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),c=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},l=function(e){var t=c(e.components);return a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=r,m=d["".concat(u,".").concat(h)]||d[h]||p[h]||i;return n?a.createElement(m,o(o({ref:t},l),{},{components:n})):a.createElement(m,o({ref:t},l))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5206:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const i={},o="Authorization",s={unversionedId:"guides/security/authorization",id:"guides/security/authorization",title:"Authorization",description:'Before you can call a pipeline or command from remote, you need to authorize ("login") first. This can be done in different ways depending on your requirements.',source:"@site/docs/guides/security/25_authorization.md",sourceDirName:"guides/security",slug:"/guides/security/authorization",permalink:"/docs/guides/security/authorization",draft:!1,editUrl:"https://github.com/pipeforce/pipeforce.github.io/edit/master/docs/guides/security/25_authorization.md",tags:[],version:"current",sidebarPosition:25,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"App Marketplace",permalink:"/docs/guides/apps/app_marketplace"},next:{title:"Identity and Access (IAM)",permalink:"/docs/guides/security/iam"}},u={},c=[{value:"HTTP Header Authorization",id:"http-header-authorization",level:2},{value:"Basic Authentication",id:"basic-authentication",level:3},{value:"Bearer Authentication",id:"bearer-authentication",level:3},{value:"RunAs Authentication",id:"runas-authentication",level:3},{value:"Refresh Authentication",id:"refresh-authentication",level:3},{value:"IAM Command Authentication",id:"iam-command-authentication",level:2},{value:"Report an Issue",id:"report-an-issue",level:2}],l={toc:c};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"authorization"},"Authorization"),(0,r.kt)("p",null,'Before you can call a pipeline or command from remote, you need to authorize ("login") first. This can be done in different ways depending on your requirements.'),(0,r.kt)("h2",{id:"http-header-authorization"},"HTTP Header Authorization"),(0,r.kt)("p",null,"You can authorize using the HTTP header ",(0,r.kt)("inlineCode",{parentName:"p"},"authorization"),".\nThis header must be set with any remote call of the pipeline or command API endpoint."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Since the HTTP header keys are case-",(0,r.kt)("strong",{parentName:"p"},"in"),"sensitive, PIPEFORCE will convert any incoming HTTP header\nkey to lower case and uses its lower case representation internally. This helps to avoid confusions\nwith pipeline headers, those keys are case-sensitive. Therefore, the examples here always\nuse the lower case HTTP key, even if you could also use other case styles if you want.")),(0,r.kt)("h3",{id:"basic-authentication"},"Basic Authentication"),(0,r.kt)("p",null,"This authentication method takes the base64 encoded username and password, separated by a colon:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"authorization: Basic <base64(username:password)>\n")),(0,r.kt)("p",null,"This would look like this example for username ",(0,r.kt)("inlineCode",{parentName:"p"},"alice")," and password ",(0,r.kt)("inlineCode",{parentName:"p"},"foo"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"authorization: Basic YWxpY2U6Zm9v\n")),(0,r.kt)("p",null,"If you're using ",(0,r.kt)("inlineCode",{parentName:"p"},"curl"),", you can specify the ",(0,r.kt)("inlineCode",{parentName:"p"},"-u")," argument so ",(0,r.kt)("inlineCode",{parentName:"p"},"curl")," is handling the base64 encoding and header placement for you:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl "https://ns.pipeforce.net/api/v3/command/..." -u "alice:foo"\n')),(0,r.kt)("h3",{id:"bearer-authentication"},"Bearer Authentication"),(0,r.kt)("p",null,"This authentication type is mostly used as part of OAuth 2.0 authentication flow."),(0,r.kt)("p",null,"At first you need to obtain the Bearer token from an exchange flow where the login credentials will be exchanged to a Bearer token."),(0,r.kt)("p",null,"Then you can set the Bearer token like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"authorization: Bearer <token>\n")),(0,r.kt)("p",null,"Here is an example how you can obtain the Bearer access token from PIPEFORCE IAM service:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'export TOKEN_RESPONSE=`curl -X POST --location "https://iam-<ns>.pipeforce.net/auth/realms/<ns>/protocol/openid-connect/token" \\\n    -H "Content-Type: application/x-www-form-urlencoded" \\\n    -d "grant_type=password&client_id=pipeforce&username=<username>&password=<password>&scope=pipeforce"`\n\nexport PIPEFORCE_ACCESS_TOKEN=`echo $TOKEN_RESPONSE | jq -r \'.access_token\'`\n\ncurl "https://hub-<ns>.pipeforce.net/api/v3/command/..." -H  -H "authorization: Bearer ${PIPEFORCE_ACCESS_TOKEN}" \n')),(0,r.kt)("h3",{id:"runas-authentication"},"RunAs Authentication"),(0,r.kt)("p",null,"This not really an authentication since it switches from an already, successfully authenticated user to another user in case the user has the permission to do so."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"This method works only in case there is already a successfully authenticated user in the current request scope.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"authorization: RunAs <username>\n")),(0,r.kt)("h3",{id:"refresh-authentication"},"Refresh Authentication"),(0,r.kt)("p",null,"This authenticates using a refresh token from an OAuth 2.0 flow."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"authorization: Refresh <token>\n")),(0,r.kt)("h2",{id:"iam-command-authentication"},"IAM Command Authentication"),(0,r.kt)("p",null,"In some cases it is required that authentication takes place inside a pipeline. For this, there are different ",(0,r.kt)("inlineCode",{parentName:"p"},"iam.*")," commands available. See commands reference for details."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Whenever possible, you should use the HTTP Header Authentication methods and avoid using IAM command authentication. They're intended only for special requirements.")),(0,r.kt)("h2",{id:"report-an-issue"},"Report an Issue"),(0,r.kt)("admonition",{title:"Your help is needed!",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"In case you're missing something on this page, you found an error or you have an idea for improvement, please ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pipeforce/pipeforce.github.io/issues/new"},"click here to create a new issue"),". Another way to contribute is, to click ",(0,r.kt)("strong",{parentName:"p"},"Edit this page")," below and directly add your changes in GitHub. Many thanks for your contribution in order to improve PIPEFORCE!")))}p.isMDXComponent=!0}}]);