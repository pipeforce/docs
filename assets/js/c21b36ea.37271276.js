"use strict";(self.webpackChunkdevdocs=self.webpackChunkdevdocs||[]).push([[2153],{3905:(e,n,a)=>{a.d(n,{Zo:()=>s,kt:()=>u});var t=a(7294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function i(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function l(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=t.createContext({}),m=function(e){var n=t.useContext(p),a=n;return e&&(a="function"==typeof e?e(n):i(i({},n),e)),a},s=function(e){var n=m(e.components);return t.createElement(p.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=m(a),u=r,h=d["".concat(p,".").concat(u)]||d[u]||c[u]||o;return a?t.createElement(h,i(i({ref:n},s),{},{components:a})):t.createElement(h,i({ref:n},s))}));function u(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=d;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var m=2;m<o;m++)i[m]=a[m];return t.createElement.apply(null,i)}return t.createElement.apply(null,a)}d.displayName="MDXCreateElement"},8545:(e,n,a)=>{a.r(n),a.d(n,{contentTitle:()=>i,default:()=>s,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var t=a(7462),r=(a(7294),a(3905));const o={},i="Error Handling",l={unversionedId:"guides/commands_pipelines/error_handling",id:"guides/commands_pipelines/error_handling",isDocsHomePage:!1,title:"Error Handling",description:"In case an error occurs during execution of a command, the execution of the command and/or the according pipeline stops by default and an error message is sent back to the caller. You have different options to adjust this default behaviour.",source:"@site/docs/guides/commands_pipelines/50_error_handling.md",sourceDirName:"guides/commands_pipelines",slug:"/guides/commands_pipelines/error_handling",permalink:"/docs/guides/commands_pipelines/error_handling",editUrl:"https://github.com/pipeforce/pipeforce.github.io/edit/master/docs/guides/commands_pipelines/50_error_handling.md",tags:[],version:"current",sidebarPosition:50,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Versioning",permalink:"/docs/guides/commands_pipelines/command_versioning"},next:{title:"3. Connectors",permalink:"/docs/guides/connectors"}},p=[{value:"Stop (default)",id:"stop-default",children:[],level:2},{value:"Ignore",id:"ignore",children:[],level:2},{value:"Ignore + log stacktrace",id:"ignore--log-stacktrace",children:[],level:2},{value:"Rollback <code>preview</code>",id:"rollback-preview",children:[],level:2},{value:"Retry",id:"retry",children:[{value:"Parameters",id:"parameters",children:[],level:3}],level:2},{value:"Report an Issue",id:"report-an-issue",children:[],level:2}],m={toc:p};function s(e){let{components:n,...a}=e;return(0,r.kt)("wrapper",(0,t.Z)({},m,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"error-handling"},"Error Handling"),(0,r.kt)("p",null,"In case an error occurs during execution of a command, the execution of the command and/or the according pipeline stops by default and an error message is sent back to the caller. You have different options to adjust this default behaviour."),(0,r.kt)("h2",{id:"stop-default"},"Stop (default)"),(0,r.kt)("p",null,"If you would like to stop execuction of the command and/or the pipeline in case an error occurs, you need to set the ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," of the pipeline header ",(0,r.kt)("inlineCode",{parentName:"p"},"onError")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"THROW"),". In this case, the full stacktrace message about the error will be logged and after this, the execution of the command and/or the pipeline will stop. "),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Default")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"In case the optional header/parameter ",(0,r.kt)("inlineCode",{parentName:"p"},"onError")," is missing, ",(0,r.kt)("inlineCode",{parentName:"p"},"THROW")," is used as the default behaviour."))),(0,r.kt)("p",null,"Here is an example to set this header in a pipeline:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: {"action": "THROW"}\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"You can also use the short form like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: "THROW"\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"You can specify this also as parameter per command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n    onError: {"action": "THROW"}\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"Or in short:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n    onError: "THROW"\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("h2",{id:"ignore"},"Ignore"),(0,r.kt)("p",null,"In order to ignore the error, you can set the ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," of the pipeline header ",(0,r.kt)("inlineCode",{parentName:"p"},"onError")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"IGNORE"),". In this case, a short message about the error will be logged and after this, the pipeline will go on with the next command. Here is an example to set this header globally for all commands in a pipeline:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: {"action": "IGNORE"}\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"You can also use the short form like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: "IGNORE"\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"You can specify this also as parameter per command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n    onError: {"action": "IGNORE"}\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"Or in short:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n    onError: "IGNORE"\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"In case you specify ",(0,r.kt)("inlineCode",{parentName:"p"},"onError")," as Pipeline header ",(0,r.kt)("strong",{parentName:"p"},"and")," as Command parameter, the parameter will have precendence."),(0,r.kt)("h2",{id:"ignore--log-stacktrace"},"Ignore + log stacktrace"),(0,r.kt)("p",null,"In order to ignore the error, but log the full stacktrace with all detail information, you can set the ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," of the pipeline header ",(0,r.kt)("inlineCode",{parentName:"p"},"onError")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"LOG"),". In this case, the full stacktrace message about the error will be logged and after this, the pipeline will go on with the next command. Here is an example to set this header in a pipeline:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: {"action": "LOG"}\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"You can also use the short form like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: "LOG"\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"You can specify this also as parameter per command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n    onError: {"action": "LOG"}\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"Or in short:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n    onError: "LOG"\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"In case you specify ",(0,r.kt)("inlineCode",{parentName:"p"},"onError")," as Pipeline header ",(0,r.kt)("strong",{parentName:"p"},"and")," as Command parameter, the parameter will have precendence."),(0,r.kt)("h2",{id:"rollback-preview"},"Rollback ",(0,r.kt)("inlineCode",{parentName:"h2"},"preview")),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"This action is currently a preview and not activated in main branch. Please give feedback! Thank you."))),(0,r.kt)("p",null,"If you would like to execute some rollback actions in case an error occured in a command, you need to set the ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," parameter of the pipeline header ",(0,r.kt)("inlineCode",{parentName:"p"},"onError")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"ROLLBACK")," and additionally specify the parameter ",(0,r.kt)("inlineCode",{parentName:"p"},"pipeline"),". In this case, the full stacktrace message about the error will be logged and after this, the given pipeline will be executed which contains the rollback logics. Here is an example to set this header in a pipeline:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: {"action": "ROLLBACK",  "pipeline": "uri:property:global/app/myapp/pipeline/rollback"}\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"In case an error occurs, the persisted pipeline ",(0,r.kt)("inlineCode",{parentName:"p"},"global/app/myapp/pipeline/rollback")," will be loaded from the property store and executed."),(0,r.kt)("p",null,"You can specify this also as parameter per command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n    onError: {"action": "ROLLBACK",  "pipeline": "uri:property:global/app/myapp/pipeline/rollback"}\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"In case you specify ",(0,r.kt)("inlineCode",{parentName:"p"},"onError")," as Pipeline header ",(0,r.kt)("strong",{parentName:"p"},"and")," as Command parameter, the parameter will have precendence."),(0,r.kt)("p",null,"There is no short form for this action."),(0,r.kt)("h2",{id:"retry"},"Retry"),(0,r.kt)("p",null,"It's also possible to retry a command after an error has been occured, executing it. In this case, after the ",(0,r.kt)("inlineCode",{parentName:"p"},"wait")," amount of seconds, the command will be re-executed the configured amount of ",(0,r.kt)("inlineCode",{parentName:"p"},"times"),". And finally, if the error still exists, a final action will be executed, defined by ",(0,r.kt)("inlineCode",{parentName:"p"},"then"),". Here is an example to set this header in a pipeline:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: {"action": "RETRY", "times": 3,  "wait": 2,  "then": {"action": "THROW"} }\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"Or shorter:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'headers:\n  onError: {"action": "RETRY", "times": 3,  "wait": 2,  "then": "THROW" }\n\npipeline:\n  commandA:\n    paramA: valueA\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"You can specify this also as parameter per command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n      onError: {"action": "RETRY", "times": 3,  "wait": 2,  "then": {"action": "THROW"} }\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"Or shorter:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'pipeline:\n  commandA:\n    paramA: valueA\n      onError: {"action": "RETRY", "times": 3,  "wait": 2,  "then": "THROW" }\n  commandB:\n    paramB: valueB\n')),(0,r.kt)("p",null,"In case you specify ",(0,r.kt)("inlineCode",{parentName:"p"},"onError")," as Pipeline header ",(0,r.kt)("strong",{parentName:"p"},"and")," as Command parameter, the parameter will have precendence."),(0,r.kt)("p",null,"In case an error happens in this example, the system will wait for ",(0,r.kt)("inlineCode",{parentName:"p"},"2")," seconds and then will re-execute the same command. This will be repeated for ",(0,r.kt)("inlineCode",{parentName:"p"},"3")," times. And if after 3 times the error still occurs, then the ",(0,r.kt)("inlineCode",{parentName:"p"},"THROW")," action will be executed, which logs the error stacktrace and then stops executing the command/pipeline. Instead of ",(0,r.kt)("inlineCode",{parentName:"p"},"THROW")," you can also define any of the other actions mentioned before in short or long form including their parameters, except the ",(0,r.kt)("inlineCode",{parentName:"p"},"RETRY")," action."),(0,r.kt)("h3",{id:"parameters"},"Parameters"),(0,r.kt)("p",null,"The optional parameters of the ",(0,r.kt)("inlineCode",{parentName:"p"},"RETRY")," action are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"wait"),": The time to wait in seconds before the next retry starts. Defaults to ",(0,r.kt)("inlineCode",{parentName:"li"},"3")," seconds."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"times"),": The number of retries before giving up and executing the ",(0,r.kt)("inlineCode",{parentName:"li"},"then")," action. Defaults to ",(0,r.kt)("inlineCode",{parentName:"li"},"1"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"then"),": The final action to do in case the error still occurs after the given amount of retries. Can be one of ",(0,r.kt)("inlineCode",{parentName:"li"},"IGNORE"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"LOG"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"THROW")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"ROLLBACK"),". Defaults to ",(0,r.kt)("inlineCode",{parentName:"li"},"THROW"),".")),(0,r.kt)("h2",{id:"report-an-issue"},"Report an Issue"),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Your help is needed!")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"In case you're missing something on this page, you found an error or you have an idea for improvement, please ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pipeforce/pipeforce.github.io/issues/new"},"click here to create a new issue"),". Another way to contribute is, to click ",(0,r.kt)("strong",{parentName:"p"},"Edit this page")," below and directly add your changes in GitHub. Many thanks for your contribution in order to improve PIPEFORCE!"))))}s.isMDXComponent=!0}}]);