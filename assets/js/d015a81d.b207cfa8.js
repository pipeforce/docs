"use strict";(self.webpackChunkdevdocs=self.webpackChunkdevdocs||[]).push([[5667],{3905:(e,t,a)=>{a.d(t,{Zo:()=>i,kt:()=>u});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),s=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):p(p({},t),e)),a},i=function(e){var t=s(e.components);return n.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,i=c(e,["components","mdxType","originalType","parentName"]),d=s(a),u=o,h=d["".concat(l,".").concat(u)]||d[u]||m[u]||r;return a?n.createElement(h,p(p({ref:t},i),{},{components:a})):n.createElement(h,p({ref:t},i))}));function u(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,p=new Array(r);p[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,p[1]=c;for(var s=2;s<r;s++)p[s]=a[s];return n.createElement.apply(null,p)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},8215:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7294);const o=function(e){let{children:t,hidden:a,className:o}=e;return n.createElement("div",{role:"tabpanel",hidden:a,className:o},t)}},6396:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(7462),o=a(7294),r=a(2389),p=a(9443);const c=function(){const e=(0,o.useContext)(p.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e};var l=a(9521),s=a(6010);const i="tabItem_vU9c";function m(e){var t,a;const{lazy:n,block:r,defaultValue:p,values:m,groupId:d,className:u}=e,h=o.Children.map(e.children,(e=>{if((0,o.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),y=m??h.map((e=>{let{props:{value:t,label:a}}=e;return{value:t,label:a}})),b=(0,l.lx)(y,((e,t)=>e.value===t.value));if(b.length>0)throw new Error(`Docusaurus error: Duplicate values "${b.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const k=null===p?p:p??(null==(t=h.find((e=>e.props.default)))?void 0:t.props.value)??(null==(a=h[0])?void 0:a.props.value);if(null!==k&&!y.some((e=>e.value===k)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${k}" but none of its children has the corresponding value. Available values are: ${y.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:v,setTabGroupChoices:g}=c(),[f,N]=(0,o.useState)(k),T=[],{blockElementScrollPositionUntilNextRender:w}=(0,l.o5)();if(null!=d){const e=v[d];null!=e&&e!==f&&y.some((t=>t.value===e))&&N(e)}const x=e=>{const t=e.currentTarget,a=T.indexOf(t),n=y[a].value;n!==f&&(w(t),N(n),null!=d&&g(d,n))},j=e=>{var t;let a=null;switch(e.key){case"ArrowRight":{const t=T.indexOf(e.currentTarget)+1;a=T[t]||T[0];break}case"ArrowLeft":{const t=T.indexOf(e.currentTarget)-1;a=T[t]||T[T.length-1];break}}null==(t=a)||t.focus()};return o.createElement("div",{className:"tabs-container"},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":r},u)},y.map((e=>{let{value:t,label:a}=e;return o.createElement("li",{role:"tab",tabIndex:f===t?0:-1,"aria-selected":f===t,className:(0,s.Z)("tabs__item",i,{"tabs__item--active":f===t}),key:t,ref:e=>T.push(e),onKeyDown:j,onFocus:x,onClick:x},a??t)}))),n?(0,o.cloneElement)(h.filter((e=>e.props.value===f))[0],{className:"margin-vert--md"}):o.createElement("div",{className:"margin-vert--md"},h.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==f})))))}function d(e){const t=(0,r.Z)();return o.createElement(m,(0,n.Z)({key:String(t)},e))}},9443:(e,t,a)=>{a.d(t,{Z:()=>n});const n=(0,a(7294).createContext)(void 0)},6661:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>l,default:()=>d,frontMatter:()=>c,metadata:()=>s,toc:()=>i});var n=a(7462),o=(a(7294),a(3905)),r=a(6396),p=a(8215);const c={title:"Property Attachments",sidebar_label:"Property Attachments"},l=void 0,s={unversionedId:"guides/propertystore/attachments",id:"guides/propertystore/attachments",isDocsHomePage:!1,title:"Property Attachments",description:"Since Version: 1.0",source:"@site/docs/guides/propertystore/16_attachments.md",sourceDirName:"guides/propertystore",slug:"/guides/propertystore/attachments",permalink:"/docs/guides/propertystore/attachments",editUrl:"https://github.com/pipeforce/pipeforce.github.io/edit/master/docs/guides/propertystore/16_attachments.md",tags:[],version:"current",sidebarPosition:16,frontMatter:{title:"Property Attachments",sidebar_label:"Property Attachments"},sidebar:"tutorialSidebar",previous:{title:"HTTP API",permalink:"/docs/guides/propertystore/http_api"},next:{title:"Property Tags",permalink:"/docs/guides/propertystore/tags"}},i=[{value:"Create an Attachment (&lt;=10MB)",id:"create-an-attachment-10mb",children:[],level:2},{value:"Create an Attachment (&gt;10MB)",id:"create-an-attachment-10mb-1",children:[],level:2},{value:"Download Attachment",id:"download-attachment",children:[],level:2},{value:"Download Attachment (chunked)",id:"download-attachment-chunked",children:[{value:"Integrity check",id:"integrity-check",children:[],level:3}],level:2},{value:"Report an Issue",id:"report-an-issue",children:[],level:2}],m={toc:i};function d(e){let{components:t,...c}=e;return(0,o.kt)("wrapper",(0,n.Z)({},m,c,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",{class:"theme-doc-version-badge badge badge--secondary"},"Since Version: 1.0"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Properties")," in the ",(0,o.kt)("strong",{parentName:"p"},"Property Store")," are objects of metadata. Sometimes, it is necessary to enrich this metadata and link it with binary data like documents or images for example. This is where ",(0,o.kt)("strong",{parentName:"p"},"Property Attachments")," come in place: Property Attachments (or just Attachments for short) contain binary block data and are always linked to exactly one Property. The storage of the binary data of Attachments can heavily scale and its data size be theoretically be unlimited. Each Property can have ",(0,o.kt)("inlineCode",{parentName:"p"},"0..n")," Attachments assigned."),(0,o.kt)("p",null,(0,o.kt)("img",{src:a(6166).Z})),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Even if it is possible to store binary data as Base64 encoded metadata value to a Property, you should consider to add them as Attachment to a Property instead. Especially if the size of this data is > 100KB, since data in Attachments can be organized in a much more effective way in the backend so performance is better."))),(0,o.kt)("h2",{id:"create-an-attachment-10mb"},"Create an Attachment (<=10MB)"),(0,o.kt)("p",null,"Before you can add binary data to an Attachment, you have to create it first and link it to an existing Property, using the command ",(0,o.kt)("a",{parentName:"p",href:"/docs/api/commands#propertyattachmentput-v1"},(0,o.kt)("inlineCode",{parentName:"a"},"property.attachment.put")),". "),(0,o.kt)("p",null,"Let's consider an example of a an job applicant, which is modelled as a Property and exists inside the Property Store under key ",(0,o.kt)("inlineCode",{parentName:"p"},"global/app/jobs/applicant/1"),". For this applicant now a CV given as PDF local file ",(0,o.kt)("inlineCode",{parentName:"p"},"my-cv.pdf"),"  must be added as Attachment. You can do so, by executing the command ",(0,o.kt)("inlineCode",{parentName:"p"},"property.attachment.put")," like one of these calls:"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(p.Z,{value:"curl",label:"cURL",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -u 'username:password' \\\n  -H 'Content-Type: application/pdf' \\\n  -X POST 'https://hub-<your-domain>/api/v3/command/property.attachment.put?key=global/app/jobs/applicant/1&name=my-cv.pdf' \\\n  --data-binary \"@/local/path/my-cv.pdf\"\n"))),(0,o.kt)(p.Z,{value:"cli",label:"CLI",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"pi command property.attachment.put key=global/app/jobs/applicant/1 name=my-cv.pdf -files /local/path/my-cv.pdf\n"))),(0,o.kt)(p.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"POST /api/v3/command/property.attachment.put?key=global/app/jobs/applicant/1&name=my-cv.pdf HTTP/1.1\nHost: hub-<your-domain>\nAuthorization: Basic cGFzc3dvcmQ6dXNlcm5hbWU=\nContent-Type: application/pdf\nContent-Length: 22\n\n<raw data of my-cv.pdf here>\n"))),(0,o.kt)(p.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar data = '<raw data of my-cv.pdf here>';\n\nvar config = {\n  method: 'post',\n  url: 'https://hub-<your-domain>/api/v3/command/property.attachment.put?key=global/app/jobs/applicant/1&name=my-cv.pdf',\n  headers: { \n    'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=', \n    'Content-Type': 'application/pdf'\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n"))),(0,o.kt)(p.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"import requests\n\nurl = \"https://hub-<your-domain>/api/v3/command/property.attachment.put?key=global/app/jobs/applicant/1&name=my-cv.pdf\"\n\npayload = \"<raw data of my-cv.pdf here>\"\nheaders = {\n  'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=',\n  'Content-Type': 'application/pdf'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n"))),(0,o.kt)(p.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<String> response = Unirest.post("https://hub-<your-domain>/api/v3/command/property.attachment.put?key=global/app/jobs/applicant/1&name=my-cv.pdf")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .header("Content-Type", "application/pdf")\n  .body("<raw data of my-cv.pdf here>")\n  .asString();\n')))),(0,o.kt)("p",null,"Such a call will do two things at once: It creates a new Attachment object with name ",(0,o.kt)("inlineCode",{parentName:"p"},"my-cv.pdf")," and attaches it to the Property with key ",(0,o.kt)("inlineCode",{parentName:"p"},"global/app/jobs/applicant/1"),". Then, it uploads and stores the PDF data at server side by reading the content from the body."),(0,o.kt)("p",null,"This approach is fast and easy for files with size up to 10 MB. For files bigger than 10 MB, you need chunked uploads."),(0,o.kt)("h2",{id:"create-an-attachment-10mb-1"},"Create an Attachment (>10MB)"),(0,o.kt)("p",null,"Since the size of a single request is limited to max. 10 MB, in case you need to add Attachments with content size bigger than this, you must use chunked uploads instead."),(0,o.kt)("p",null,"In the backend, the binary data of an Attachment is always split up into blocks, called ",(0,o.kt)("strong",{parentName:"p"},"chunks"),". Each Attachment will have one to many chunks assigned. Each chunk is by default up to 10 MB. In case an Attachment has no chunk assigned, it's size is ",(0,o.kt)("inlineCode",{parentName:"p"},"0"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{src:a(3999).Z})),(0,o.kt)("p",null,"Where content is finally saved, depends on the backend implementation. This picture should give you just a basic understanding about the relation between these core objects of the Property Store. "),(0,o.kt)("p",null,"When it comes to uploading Attachments of size > 10 MB, you need to implement in your client code a routine similar to this:"),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Chunked Upload")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("ol",{parentName:"div"},(0,o.kt)("li",{parentName:"ol"},"Create an empty attachment using the command ",(0,o.kt)("a",{parentName:"li",href:"/docs/api/commands#propertyattachmentput-v1"},(0,o.kt)("inlineCode",{parentName:"a"},"property.attachment.put")),"."),(0,o.kt)("li",{parentName:"ol"},"Read the local file to be uploaded, extract a chunk up to 10 MB from it and upload it using the command ",(0,o.kt)("a",{parentName:"li",href:"/docs/api/commands#propertyattachmentchunkput-v1"},(0,o.kt)("inlineCode",{parentName:"a"},"property.attachment.chunk.put")),"."),(0,o.kt)("li",{parentName:"ol"},"Repeat 2. until all chunks are uploaded. ")))),(0,o.kt)("p",null,"Let's use the job applicant example from above and let's assume, the applicant wants to add an introduction movie as Attachment which is around 100 MB big in size. Creating an empty Attachment for this could look liks this example:"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(p.Z,{value:"curl",label:"cURL",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -u 'username:password' \\\n  -X POST 'https://hub-<your-domain>/api/v3/command/property.attachment.put?key=global/app/jobs/applicant/1&name=my-cv.mp4&contentType=video/mp4'\n"))),(0,o.kt)(p.Z,{value:"cli",label:"CLI",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"pi command property.attachment.put key=global/app/jobs/applicant/1 name=my-cv.mp4\n"))),(0,o.kt)(p.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"POST /api/v3/command/property.attachment.put?key=global/app/jobs/applicant/1&name=my-cv.mp4&contentType=video/mp4 HTTP/1.1\nHost: hub-<your-domain>\nAuthorization: Basic cGFzc3dvcmQ6dXNlcm5hbWU=\nContent-Length: 0\n\n"))),(0,o.kt)(p.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\n\nvar config = {\n  method: 'post',\n  url: 'https://hub-<your-domain>/api/v3/command/property.attachment.put?key=global/app/jobs/applicant/1&name=my-cv.mp4&contentType=video/mp4',\n  headers: { \n    'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=', \n  },\n  data : null\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n"))),(0,o.kt)(p.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"import requests\n\nurl = \"https://hub-<your-domain>/api/v3/command/property.attachment.put?key=global/app/jobs/applicant/1&name=my-cv.mp4&contentType=video/mp4\"\n\nheaders = {\n  'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=',\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=None)\n"))),(0,o.kt)(p.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<String> response = Unirest.post("https://hub-<your-domain>/api/v3/command/property.attachment.put?key=global/app/jobs/applicant/1&name=my-cv.mp4&contentType=video/mp4")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .asString();\n')))),(0,o.kt)("p",null,"Instead of sending this as HTTP POST, you could also use an HTTP GET. See ",(0,o.kt)("a",{parentName:"p",href:"/docs/guides/commands_pipelines/http_api"},"HTTP API")," for more options. After the empty Attachment has been created, sending a single chunk could look like this example:"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(p.Z,{value:"curl",label:"cURL",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -u 'username:password' \\\n  -H 'Content-Type: application/octet-stream' \\\n  -X POST 'https://hub-<your-domain>/api/v3/command/property.attachment.chunk.put?key=global/app/jobs/applicant/1&name=my-cv.pdf' \\\n  --data-binary \"@/local/path/chunk01\"\n"))),(0,o.kt)(p.Z,{value:"cli",label:"CLI",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"pi command property.attachment.chunk.put key=global/app/jobs/applicant/1 name=my-cv.pdf -files /local/path/chunk01\n"))),(0,o.kt)(p.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"POST /api/v3/command/property.attachment.put?key=global/app/jobs/applicant/1&name=my-cv.pdf HTTP/1.1\nHost: hub-<your-domain>\nAuthorization: Basic cGFzc3dvcmQ6dXNlcm5hbWU=\nContent-Type: application/octet-stream\nContent-Length: 22\n\n<raw data of chunk01 here>\n"))),(0,o.kt)(p.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar data = '<raw data of chunk01 here>';\n\nvar config = {\n  method: 'post',\n  url: 'https://hub-<your-domain>/api/v3/command/property.attachment.chunk.put?key=global/app/jobs/applicant/1&name=my-cv.pdf',\n  headers: { \n    'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=', \n    'Content-Type': 'application/octet-stream'\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n"))),(0,o.kt)(p.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"import requests\n\nurl = \"https://hub-<your-domain>/api/v3/command/property.attachment.chunk.put?key=global/app/jobs/applicant/1&name=my-cv.pdf\"\n\npayload = \"<raw data of chunk01 here>\"\nheaders = {\n  'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=',\n  'Content-Type': 'application/octet-stream'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n"))),(0,o.kt)(p.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<String> response = Unirest.post("https://hub-<your-domain>/api/v3/command/property.attachment.chunk.put?key=global/app/jobs/applicant/1&name=my-cv.pdf")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .header("Content-Type", "application/octet-stream")\n  .body("<raw data of chunk01 here>")\n  .asString();\n')))),(0,o.kt)("p",null,"This needs to be repeated until all content has been uploaded. In this example, the parameter ",(0,o.kt)("inlineCode",{parentName:"p"},"index")," is omitted. In this case, the chunk index is automatically calculated. Also note to set the ",(0,o.kt)("inlineCode",{parentName:"p"},"Content-Type")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"application/octet-stream"),"."),(0,o.kt)("h2",{id:"download-attachment"},"Download Attachment"),(0,o.kt)("p",null,"In order to download the content of an Attachment, you can use the command ",(0,o.kt)("inlineCode",{parentName:"p"},"property.attachment.content")," which will stream the whole content of the Attachment as as one single file to the client. The chunks will be concatenated automatically in the backend."),(0,o.kt)("p",null,"Here is an example to download the file ",(0,o.kt)("inlineCode",{parentName:"p"},"my-cv.pdf")," from the upload example above as one single content stream:"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(p.Z,{value:"curl",label:"cURL",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -u 'username:password' \\\n  -X GET 'https://hub-<your-domain>/api/v3/command/property.attachment.content?key=global/app/jobs/applicant/1&name=my-cv.pdf'\n"))),(0,o.kt)(p.Z,{value:"cli",label:"CLI",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"pi command property.attachment.content key=global/app/jobs/applicant/1 name=my-cv.pdf\n"))),(0,o.kt)(p.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"GET /api/v3/command/property.attachment.content?key=global/app/jobs/applicant/1&name=my-cv.pdf HTTP/1.1\nHost: hub-<your-domain>\nAuthorization: Basic cGFzc3dvcmQ6dXNlcm5hbWU=\n"))),(0,o.kt)(p.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\n\nvar config = {\n  method: 'get',\n  url: 'https://hub-<your-domain>/api/v3/command/property.attachment.content?key=global/app/jobs/applicant/1&name=my-cv.pdf',\n  headers: { \n    'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=', \n  }\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n"))),(0,o.kt)(p.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"import requests\n\nurl = \"https://hub-<your-domain>/api/v3/command/property.attachment.content?key=global/app/jobs/applicant/1&name=my-cv.pdf\"\n\nheaders = {\n  'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU='\n}\n\nresponse = requests.request(\"GET\", url, headers=headers, data=None)\n"))),(0,o.kt)(p.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<File> response = Unirest.get("https://hub-<your-domain>/api/v3/command/property.attachment.content?key=global/app/jobs/applicant/1&name=my-cv.pdf")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .asFile("/local/path/my-cv.pdf");\n')))),(0,o.kt)("h2",{id:"download-attachment-chunked"},"Download Attachment (chunked)"),(0,o.kt)("p",null,"For big Attachments > ~20 MB it makes sense to use chunked download, if possible in order to reduce system load and increase download speed. Furthermore you can easily implemnt pause and resume and do integrity checks per chunk. In this approach you first have to load the number of chunks of the Attachment using the command ",(0,o.kt)("inlineCode",{parentName:"p"},"property.attachment.get")," and then you can call the command ",(0,o.kt)("inlineCode",{parentName:"p"},"property.attachment.chunk.content")," for each index. At client side you have to merge the chunks finally into a single file. Here is an example how to download a the chunk at index ",(0,o.kt)("inlineCode",{parentName:"p"},"0"),":"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(p.Z,{value:"curl",label:"cURL",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -u 'username:password' \\\n  -X GET 'https://hub-<your-domain>/api/v3/command/property.attachment.chunk.content?key=global/app/jobs/applicant/1&name=my-cv.pdf&index=0'\n"))),(0,o.kt)(p.Z,{value:"cli",label:"CLI",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"pi command property.attachment.chunk.content key=global/app/jobs/applicant/1 name=my-cv.pdf index=0\n"))),(0,o.kt)(p.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"GET /api/v3/command/property.attachment.chunk.content?key=global/app/jobs/applicant/1&name=my-cv.pdf&index=0 HTTP/1.1\nHost: hub-<your-domain>\nAuthorization: Basic cGFzc3dvcmQ6dXNlcm5hbWU=\n"))),(0,o.kt)(p.Z,{value:"nodejs",label:"NodeJs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\n\nvar config = {\n  method: 'get',\n  url: 'https://hub-<your-domain>/api/v3/command/property.attachment.chunk.content?key=global/app/jobs/applicant/1&name=my-cv.pdf&index=0',\n  headers: { \n    'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU=', \n  }\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n"))),(0,o.kt)(p.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"import requests\n\nurl = \"https://hub-<your-domain>/api/v3/command/property.attachment.chunk.content?key=global/app/jobs/applicant/1&name=my-cv.pdf&index=0\"\n\nheaders = {\n  'Authorization': 'Basic cGFzc3dvcmQ6dXNlcm5hbWU='\n}\n\nresponse = requests.request(\"GET\", url, headers=headers, data=None)\n"))),(0,o.kt)(p.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'HttpResponse<File> response = Unirest.get("https://hub-<your-domain>/api/v3/command/property.attachment.chunk.content?key=global/app/jobs/applicant/1&name=my-cv.pdf&index=0")\n  .header("Authorization", "Basic cGFzc3dvcmQ6dXNlcm5hbWU=")\n  .asFile("/local/path/chunk1");\n')))),(0,o.kt)("h3",{id:"integrity-check"},"Integrity check"),(0,o.kt)("p",null,"In order to do an integrity check of the chunks downloaded, you can use response header ",(0,o.kt)("inlineCode",{parentName:"p"},"Digest")," which is sent with the response and contains the MD5 checksum of the downloaded chunk in format ",(0,o.kt)("inlineCode",{parentName:"p"},"md5=<hexadecimal>"),", for example ",(0,o.kt)("inlineCode",{parentName:"p"},"Digest: md5=3ead0df0186e96d94d5ab025c282ed1f"),"."),(0,o.kt)("p",null,"You can then calculate the same checksum of your downloaded chunk and compare it with the digest value from the header. If they do not match, delete the local chunk and download again."),(0,o.kt)("h2",{id:"report-an-issue"},"Report an Issue"),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Your help is needed!")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"In case you're missing something on this page, you found an error or you have an idea for improvement, please ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/pipeforce/pipeforce.github.io/issues/new"},"click here to create a new issue"),". Another way to contribute is, to click ",(0,o.kt)("strong",{parentName:"p"},"Edit this page")," below and directly add your changes in GitHub. Many thanks for your contribution in order to improve PIPEFORCE!"))))}d.isMDXComponent=!0},3999:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/property-attachments-chunks-fb6873d81779c7a0b4e2f1165e347e88.png"},6166:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/property-attachments-1fadb76af1cf932821ba4b279629793c.png"}}]);